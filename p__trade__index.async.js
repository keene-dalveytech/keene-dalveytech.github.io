(self.webpackChunk=self.webpackChunk||[]).push([[939],{66133:function(e,t,n){"use strict";var i=n(86378),r=n.n(i),a=n(57518),l=n.n(a),s=n(33098),o=(n(93236),n(62086));t.Z=function(e){var t=Object.assign({},(l()(e),e)),n=t.dropdownStyle?Object.assign({padding:"8px 4px"},t.dropdownStyle):{padding:"8px 4px"};return(0,o.jsx)(s.Z,r()({dropdownStyle:n},t))}},69033:function(e,t,n){"use strict";n.d(t,{x:function(){return l}});var i=n(97810),r=n(4051),a=n(70855);function l(){var e=(0,i.Ge)().chainId;if(!e){var t=localStorage.getItem(a.HC);t&&((e=parseInt(t))||localStorage.removeItem(a.HC))}return e&&r.FQ.includes(e)||(e=r.rC),{chainId:e}}},70656:function(e,t,n){"use strict";n.d(t,{ET:function(){return d},FB:function(){return l},Qo:function(){return s},VZ:function(){return c},YO:function(){return o},bD:function(){return a},pQ:function(){return u}});var i=n(4051),r=n(34804),a=0,l="Long",s="Short",o="Market",c="Limit",u=((0,r.Jl)(1,30),{"5m":300,"15m":900,"1h":3600,"4h":14400,"1d":86400});function d(e,t){return t?(0,i.jY)(e)+"address/"+t:(0,i.jY)(e)}},29449:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Ka}});var i=n(90967),r=n.n(i),a=n(30577),l=n.n(a),s=n(97810),o=n(93236),c=n(8403),u=n(23878),d=n(52149),p=n(24047),v=n.n(p),m=n(86378),f=n.n(m),y=n(72294),g=n.n(y),x=n(58357),h=n.n(x),_=n(71977),b=n.n(_),j=n(84875),P=n.n(j),N=n(57531),w=n(34363),L=Object.defineProperty,T=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,S=(e,t,n)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const F=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))C.call(t,n)&&S(e,n,t[n]);if(T)for(var n of T(t))k.call(t,n)&&S(e,n,t[n]);return e})({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("rect",{width:32,height:32,rx:16,fill:"url(#depx_select_icon_svg__a)"}),o.createElement("rect",{width:32,height:32,rx:16,fill:"url(#depx_select_icon_svg__b)"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.05 5.95a1.2 1.2 0 0 1 1.2-1.2H16a11.22 11.22 0 0 1 8.248 3.6H11.05v-2.4Zm0 8.25h16.057a11.337 11.337 0 0 1 0 3.6H11.05v-3.6Zm0 9.45v2.4a1.2 1.2 0 0 0 1.2 1.2H16a11.22 11.22 0 0 0 8.248-3.6H11.05Z",fill:"#fff"}),o.createElement("path",{opacity:.6,fillRule:"evenodd",clipRule:"evenodd",d:"M6.834 9.475a11.201 11.201 0 0 0-1.7 3.6h21.732a11.202 11.202 0 0 0-1.7-3.6H6.833Zm0 13.05a11.203 11.203 0 0 1-1.7-3.6h21.732a11.205 11.205 0 0 1-1.7 3.6H6.833Zm9.148 4.725h.035-.035Z",fill:"#fff"}),o.createElement("defs",null,o.createElement("linearGradient",{id:"depx_select_icon_svg__a",x1:0,y1:0,x2:39.172,y2:10.86,gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#3CEAAA"}),o.createElement("stop",{offset:.771,stopColor:"#5C72FF"})),o.createElement("linearGradient",{id:"depx_select_icon_svg__b",x1:0,y1:0,x2:39.172,y2:10.86,gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#3CEAAA"}),o.createElement("stop",{offset:.771,stopColor:"#5C72FF"}))));var I=Object.defineProperty,M=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,A=(e,t,n)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const E=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))O.call(t,n)&&A(e,n,t[n]);if(M)for(var n of M(t))D.call(t,n)&&A(e,n,t[n]);return e})({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("g",{filter:"url(#more_svg__b)",clipPath:"url(#more_svg__a)"},o.createElement("path",{d:"m16.8 9-4.837 7.2L7.2 9h9.6Z",fill:"#fff"})),o.createElement("defs",null,o.createElement("clipPath",{id:"more_svg__a"},o.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})),o.createElement("filter",{id:"more_svg__b",x:3.199,y:9,width:17.6,height:15.2,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},o.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),o.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),o.createElement("feOffset",{dy:4}),o.createElement("feGaussianBlur",{stdDeviation:2}),o.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),o.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),o.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_313_1951"}),o.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_313_1951",result:"shape"}))));var z="btn___r1nTS",R="targetSelect___WQeay",Q="menu___rnv_7",B="menus___KY35b",H="menuItem___wEjP0",Z="activeItem___kB1Rj",V=n(62086),U=function(e){var t=e.options,n=e.onChange,i=e.value;return(0,V.jsx)("div",{className:Q,children:(0,V.jsxs)(w.v,{children:[(0,V.jsxs)(w.v.Button,{className:z,children:[(0,V.jsx)(F,{}),(0,V.jsx)("div",{className:R,children:null==i?void 0:i.name}),(0,V.jsx)(E,{})]}),(0,V.jsx)(w.v.Items,{as:"div",className:B,children:(t||[]).map((function(e,t){return(0,V.jsx)(w.v.Item,{children:function(t){var i=t.active;return(0,V.jsx)("div",{className:P()(H,v()({},Z,i)),onClick:function(){n(e)},children:(0,V.jsx)("span",{style:{marginLeft:5},children:e.name})})}},t)}))})]})})},q={tab:"tab___AIepu",periodTab:"periodTab___AU1Sf",tabItem:"tabItem___K48RO",active:"active___yzxjn",statsLabel:"statsLabel___h81vX",statsValue:"statsValue___haDDX"},J=function(e){var t=e.options,n=e.stats,i=e.value,r=e.className,a=e.onChange;return(0,V.jsxs)("div",{className:P()(q.tab,r),children:[(0,V.jsx)("ul",{className:q.periodTab,children:t.map((function(e){return(0,V.jsx)("li",{onClick:function(){return a(e.value)},className:P()(q.tabItem,v()({},q.active,e.value===i)),children:e.label},e.value)}))}),(0,V.jsxs)("div",{className:P()(q.stats,null==n?void 0:n.className),children:[(0,V.jsx)("span",{className:q.statsLabel,children:"O"}),(0,V.jsx)("span",{className:q.statsValue,children:null==n?void 0:n.O}),(0,V.jsx)("span",{className:q.statsLabel,children:"H"}),(0,V.jsx)("span",{className:q.statsValue,children:null==n?void 0:n.H}),(0,V.jsx)("span",{className:q.statsLabel,children:"L"}),(0,V.jsx)("span",{className:q.statsValue,children:null==n?void 0:n.L}),(0,V.jsx)("span",{className:q.statsLabel,children:"C"}),(0,V.jsx)("span",{className:q.statsValue,children:null==n?void 0:n.C})]})]})},G=n(63338),Y=n(14121),K="klines",W=Y.Z.create({baseURL:"https://api.binance.com/api/v3/",timeout:5e3}),X={getKLines:function(e,t){return W.get(K,{params:{symbol:e,interval:t}})}},$=function(){var e=b()(h()().mark((function e(t,n){var i,r,a,s,o,c,u,d,p,v;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],e.prev=1,e.next=4,X.getKLines(t.toUpperCase(),n);case 4:if((r=e.sent).data)for(a=0;a<r.data.length;a++)s=r.data[a],o=l()(s,5),c=o[0],u=o[1],d=o[2],p=o[3],v=o[4],i.push({time:c/1e3,open:u,high:d,low:p,close:v});e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}();var ee=n(69033),te=n(66757);var ne=n(97364),ie=n(70656),re=n(70855),ae=n(65146),le={main:"main___baTli",chart:"chart___CLGMg",kchart:"kchart___QYDyz",periodTab:"periodTab___cinp7",currentPrice:"currentPrice___wEDGk",header:"header___AT8K5",indexPriceContainer:"indexPriceContainer___vWNqA",priceBox:"priceBox___yHFEN",title:"title___tV3f3",headerRight:"headerRight___fs_Ys",price:"price___e2U86",percentage:"percentage___S6CTj",negative:"negative___R8NaS",positive:"positive___XgCl2"},se=60*-(new Date).getTimezoneOffset(),oe=Object.keys(ie.pQ).map((function(e){return{label:e,value:e}})),ce=function(e,t){return{width:e,height:t,layout:{backgroundColor:"rgba(255, 255, 255, 0)",textColor:"#9597b5",fontFamily:"Relative"},localization:{timeFormatter:function(e){return t=e-se,(0,te.Z)(1e3*t,"dd MMM yyyy, h:mm a");var t}},grid:{vertLines:{visible:!0,color:"rgba(35, 38, 59, 1)",style:2},horzLines:{visible:!0,color:"rgba(35, 38, 59, 1)",style:2}},timeScale:{rightOffset:5,borderVisible:!1,barSpacing:5,timeVisible:!0,fixLeftEdge:!0},priceScale:{borderVisible:!1},crosshair:{horzLine:{color:"#aaa"},vertLine:{color:"#aaa"},mode:0}}},ue={getKLines:function(e,t){return $(e,t)}},de=function(e){var t,n,i,r,a,s,p,m,y=e.indexPrice,x=(0,o.useRef)(),_=(0,o.useState)(),j=l()(_,2),w=j[0],L=j[1],T=(0,o.useState)(!1),C=l()(T,2),k=C[0],S=C[1],F=(0,o.useState)(),I=l()(F,2),M=I[0],O=I[1],D=(0,o.useState)(),A=l()(D,2),E=A[0],z=A[1],R=(0,ee.x)().chainId,Q=(0,c.sJ)(d.O7),B=(0,c.sJ)(d.tr),H=(0,c.FV)(d.bI),Z=l()(H,2),q=Z[0],Y=Z[1],K=null===(t=(0,ne.do)(null==q?void 0:q.name))||void 0===t?void 0:t.toLowerCase(),W=(0,re.Ju)([R,"Chart-period"],"15m"),X=l()(W,2),$=X[0],te=X[1];$ in ie.pQ||($="15m");var de,pe,ve=null!=q&&q.name?["getChartCandles",R,K,$]:null,me=(0,u.ZP)(ve,{fetcher:(de=b()(h()().mark((function e(){return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.getKLines(K,$);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),function(){return de.apply(this,arguments)}),dedupingInterval:6e4,focusThrottleInterval:6e5}),fe=me.data,ye=me.mutate,ge=(pe=Q[K])?{Change:pe["24Change"],ChangeRate:pe["24ChangeRate"],Hige:pe["24Height"],Low:pe["24Low"]}:{Change:(0,G.Q6)(0),ChangeRate:(0,G.Q6)(0),Hige:(0,G.Q6)(0),Low:(0,G.Q6)(0)};(0,o.useEffect)((function(){var e=setInterval((function(){ye(void 0,!0)}),6e4);return function(){return clearInterval(e)}}),[ye]);var xe=(0,o.useCallback)((function(e){if(e.time){var t,n=g()(e.seriesPrices.values());try{var i=function(){var n=t.value;return L((function(t){return t&&t.time===e.time?t:f()({time:e.time},n)})),"break"};for(n.s();!(t=n.n()).done;){if("break"===i())break}}catch(e){n.e(e)}finally{n.f()}}else L(null)}),[L]),he=(0,o.useCallback)((function(){if("5m"!==$&&M&&$){var e=Date.now()/1e3-168*ie.pQ[$]/2+se,t=Date.now()/1e3+se;M.timeScale().setVisibleRange({from:e,to:t})}}),[M,$]);(0,o.useEffect)((function(){var e,t;if(fe&&fe.length&&!M){var n=(0,N.C2)(x.current,ce(null===(e=x.current)||void 0===e?void 0:e.offsetWidth,null===(t=x.current)||void 0===t?void 0:t.offsetHeight));n.subscribeCrosshairMove(xe);var i=n.addCandlestickSeries({lineColor:"#5472cc",topColor:"rgba(49, 69, 131, 0.4)",bottomColor:"rgba(42, 64, 103, 0.0)",lineWidth:2,priceLineColor:"#3a3e5e",downColor:"#fa3c58",wickDownColor:"#fa3c58",upColor:"#0ecc83",wickUpColor:"#0ecc83",borderVisible:!1});O(n),z(i)}}),[fe]),(0,o.useEffect)((function(){if(M){var e=function(){x.current&&M.resize(x.current.offsetWidth,x.current.offsetHeight)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}}),[M]),(0,o.useEffect)((function(){E&&fe&&fe.length&&(E.setData(fe),k||(he(),S(!0)))}),[fe,E,k,he]);var _e=(0,o.useMemo)((function(){var e;if(fe){var t=w||fe[fe.length-1];if(t){return{className:P()((e={},v()(e,le.positive,t.open<=t.close),v()(e,le.negative,t.open>t.close),e)),O:(0,G.Q6)(t.open).toFixed(2,1),H:(0,G.Q6)(t.high).toFixed(2,1),L:(0,G.Q6)(t.low).toFixed(2,1),C:(0,G.Q6)(t.close).toFixed(2,1)}}}}),[w,fe]);if(!q)return null;var be=function(e){return e?e.gt(0)?"+".concat(e.toFixed(2,1)):"".concat(e.toFixed(2,1)):"-"};return(0,V.jsxs)("div",{className:le.main,children:[(0,V.jsxs)("div",{className:le.header,children:[(0,V.jsxs)("div",{className:le.indexPriceContainer,children:[(0,V.jsx)(U,{options:B||[],value:q,onChange:function(e){return Y(f()({},e))},chainId:R}),(0,V.jsxs)("div",{className:le.currentPrice,children:["$",null!=y?y:ae.PW]})]}),(0,V.jsx)("div",{className:le.headerRight,children:[{title:"24h Change",text:"".concat(be(null==ge?void 0:ge.Change)," ").concat(be(null==ge?void 0:ge.ChangeRate),"%"),className:P()(le.percentage,(r={},v()(r,le.positive,null==ge||null===(n=ge.Change)||void 0===n?void 0:n.gt(0)),v()(r,le.negative,null==ge||null===(i=ge.Change)||void 0===i?void 0:i.lt(0)),r))},{title:"24h High",text:null!==(a=null==ge||null===(s=ge.Hige)||void 0===s?void 0:s.toFixed(2,1))&&void 0!==a?a:ae.PW,className:le.price},{title:"24h Low",text:null!==(p=null==ge||null===(m=ge.Low)||void 0===m?void 0:m.toFixed(2,1))&&void 0!==p?p:ae.PW,className:le.price}].map((function(e,t){return(0,V.jsxs)("div",{className:le.priceBox,children:[(0,V.jsx)("span",{className:le.title,children:e.title}),(0,V.jsx)("span",{className:"".concat(le.text," ").concat(e.className),children:e.text})]},t)}))})]}),(0,V.jsxs)("div",{className:le.kchart,children:[(0,V.jsx)(J,{stats:_e,className:le.periodTab,value:$,onChange:te,options:oe}),(0,V.jsx)("div",{className:le.chart,ref:x})]})]})},pe=n(14557),ve=n.n(pe),me=n(39712),fe=n.n(me),ye=n(64698),ge=n.n(ye),xe=n(62898),he=n.n(xe),_e=JSON.parse('{"Mt":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"_market","type":"address"},{"internalType":"address","name":"_account","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"availableLiquidity","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"address","name":"_market","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"getFundingFee","outputs":[{"internalType":"int256","name":"","type":"int256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_market","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"getFundingRate","outputs":[{"internalType":"int256","name":"","type":"int256"},{"internalType":"int256","name":"","type":"int256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_marketAddr","type":"address"}],"name":"getMarket","outputs":[{"components":[{"internalType":"uint256","name":"minSlippage","type":"uint256"},{"internalType":"uint256","name":"maxSlippage","type":"uint256"},{"internalType":"uint256","name":"slippageDigits","type":"uint256"},{"internalType":"uint256","name":"minLev","type":"uint256"},{"internalType":"uint256","name":"maxLev","type":"uint256"},{"internalType":"uint256","name":"minCollateral","type":"uint256"},{"internalType":"uint256","name":"maxTradeAmount","type":"uint256"},{"internalType":"bool","name":"allowOpen","type":"bool"},{"internalType":"bool","name":"allowClose","type":"bool"}],"internalType":"struct IMarketReader.ValidOuts","name":"validOuts","type":"tuple"},{"components":[{"internalType":"uint256","name":"tokenDigits","type":"uint256"},{"internalType":"uint256","name":"closeFeeRate","type":"uint256"},{"internalType":"uint256","name":"openFeeRate","type":"uint256"},{"internalType":"uint256","name":"liquidationFeeUsd","type":"uint256"},{"internalType":"uint256","name":"spread","type":"uint256"},{"internalType":"address","name":"indexToken","type":"address"},{"internalType":"address","name":"collateralToken","type":"address"},{"internalType":"address","name":"vault","type":"address"},{"internalType":"address","name":"marketAddressesProvider","type":"address"},{"internalType":"address","name":"orderBookLong","type":"address"},{"internalType":"address","name":"orderBookShort","type":"address"},{"internalType":"address","name":"positionBook","type":"address"}],"internalType":"struct IMarketReader.MarketOuts","name":"mktOuts","type":"tuple"},{"components":[{"internalType":"uint256","name":"closeFeeRate","type":"uint256"},{"internalType":"uint256","name":"openFeeRate","type":"uint256"},{"internalType":"uint256","name":"execFee","type":"uint256"},{"internalType":"uint256","name":"liquidateFee","type":"uint256"},{"internalType":"uint256","name":"digits","type":"uint256"}],"internalType":"struct IMarketReader.FeeOuts","name":"feeOuts","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"address","name":"_market","type":"address"}],"name":"getPositions","outputs":[{"components":[{"internalType":"uint256","name":"size","type":"uint256"},{"internalType":"uint256","name":"collateral","type":"uint256"},{"internalType":"uint256","name":"averagePrice","type":"uint256"},{"internalType":"int256","name":"entryFundingRate","type":"int256"},{"internalType":"uint256","name":"realisedPnl","type":"uint256"},{"internalType":"bool","name":"hasProfit","type":"bool"},{"internalType":"uint256","name":"lastTime","type":"uint256"},{"internalType":"bool","name":"isLong","type":"bool"},{"internalType":"uint256[]","name":"orderIDs","type":"uint256[]"}],"internalType":"struct IMarketReader.PositionOuts[]","name":"_positions","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_mkt","type":"address"},{"internalType":"address","name":"_user","type":"address"}],"name":"getUserFee","outputs":[{"components":[{"internalType":"uint256","name":"openFee","type":"uint256"},{"internalType":"uint256","name":"closeFee","type":"uint256"},{"internalType":"int256","name":"fundFee","type":"int256"},{"internalType":"uint256","name":"liquidateFee","type":"uint256"},{"internalType":"uint256","name":"execFee","type":"uint256"}],"internalType":"struct IMarketReader.UserFeeOuts","name":"_outs","type":"tuple"}],"stateMutability":"view","type":"function"}]}'),be=n(59493),je=n(89617),Pe=n.n(je),Ne=JSON.parse('{"Mt":[{"inputs":[{"internalType":"string","name":"_name","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"bool","name":"isLong","type":"bool"},{"indexed":false,"internalType":"bool","name":"isIncrease","type":"bool"},{"indexed":false,"internalType":"uint256","name":"orderID","type":"uint256"},{"indexed":false,"internalType":"address","name":"market","type":"address"},{"indexed":false,"internalType":"uint8","name":"reason","type":"uint8"}],"name":"DeleteOrder","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"uint256","name":"collateralDelta","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"sizeDelta","type":"uint256"},{"indexed":false,"internalType":"bool","name":"isLong","type":"bool"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"},{"indexed":false,"internalType":"int256","name":"pnl","type":"int256"},{"components":[{"internalType":"int256","name":"_totoalFees","type":"int256"},{"internalType":"int256","name":"_execFee","type":"int256"},{"internalType":"int256","name":"_fundFee","type":"int256"},{"internalType":"int256","name":"_tradeFee","type":"int256"}],"indexed":false,"internalType":"struct MarketStorage.FeesVars","name":"fees","type":"tuple"},{"indexed":false,"internalType":"address","name":"market","type":"address"},{"indexed":false,"internalType":"address","name":"collateralToken","type":"address"},{"indexed":false,"internalType":"address","name":"indexToken","type":"address"},{"indexed":false,"internalType":"uint256","name":"category","type":"uint256"}],"name":"UpdatePosition","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"uint256","name":"collateralDelta","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"sizeDelta","type":"uint256"},{"indexed":false,"internalType":"bool","name":"isLong","type":"bool"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"},{"indexed":false,"internalType":"int256","name":"pnl","type":"int256"},{"components":[{"internalType":"int256","name":"_totoalFees","type":"int256"},{"internalType":"int256","name":"_execFee","type":"int256"},{"internalType":"int256","name":"_fundFee","type":"int256"},{"internalType":"int256","name":"_tradeFee","type":"int256"}],"indexed":false,"internalType":"struct MarketStorage.FeesVars","name":"fees","type":"tuple"},{"indexed":false,"internalType":"address","name":"market","type":"address"},{"indexed":false,"internalType":"address","name":"collateralToken","type":"address"},{"indexed":false,"internalType":"address","name":"indexToken","type":"address"},{"indexed":false,"internalType":"uint256","name":"category","type":"uint256"}],"name":"UpdatePositionFromOrder","type":"event"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ROLE_FACTORY","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ROLE_POS_KEEPER","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bool","name":"_isIncrease","type":"bool"},{"internalType":"uint256","name":"_orderID","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"cancelOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool[]","name":"_isIncreaseList","type":"bool[]"},{"internalType":"uint256[]","name":"_orderIDList","type":"uint256[]"},{"internalType":"bool[]","name":"_isLongList","type":"bool[]"}],"name":"cancelOrderList","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"collateralToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bool","name":"","type":"bool"}],"name":"decreaseCollateral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_isLimit","type":"bool"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"bool","name":"_isKeepLev","type":"bool"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bool","name":"_isExec","type":"bool"}],"name":"decreaseTrade","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_isLimit","type":"bool"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"bool","name":"_isKeepLev","type":"bool"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bool","name":"_triggerAbove","type":"bool"}],"name":"decreaseTrade2","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_orderKey","type":"bytes32"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bool","name":"_isIncrease","type":"bool"}],"name":"execOrderKey","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"feeRouter","outputs":[{"internalType":"contract IFeeRouter","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_collateralDelta","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"increaseCollateral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_isLimit","type":"bool"},{"internalType":"uint256","name":"_payDelta","type":"uint256"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_tpPrice","type":"uint256"},{"internalType":"uint256","name":"_slPrice","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bool","name":"_isExec","type":"bool"}],"name":"increaseTrade","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"indexToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_positionBook","type":"address"},{"internalType":"contract IOrderBook","name":"_orderBookLong","type":"address"},{"internalType":"contract IOrderBook","name":"_orderBookShort","type":"address"},{"internalType":"address","name":"_addressProvider","type":"address"},{"internalType":"address","name":"_indexToken","type":"address"},{"internalType":"address","name":"_feeRouter","type":"address"},{"internalType":"address","name":"_feeVault","type":"address"},{"internalType":"address","name":"_marketRouter","type":"address"},{"internalType":"address","name":"_vault","type":"address"},{"internalType":"address","name":"_vaultRouter","type":"address"},{"internalType":"address","name":"_collateralToken","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_key","type":"bytes32"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"isLiquidate","outputs":[{"internalType":"uint256","name":"_state","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"bool","name":"","type":"bool"}],"name":"liquidatePosition","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32[]","name":"keys","type":"bytes32[]"},{"internalType":"bool","name":"isLong","type":"bool"}],"name":"liquidatePositionByKey","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"market2","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"marketAddressesProvider","outputs":[{"internalType":"contract IMarketAddressesProvider","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"orderBookLong","outputs":[{"internalType":"contract IOrderBook","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"orderBookShort","outputs":[{"internalType":"contract IOrderBook","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"positionBook","outputs":[{"internalType":"contract IPositionBook","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_delete","type":"bool"}],"name":"setDeleteOrdersWhenPositionClosed","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_m","type":"address"}],"name":"setMarket2","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_p","type":"bool"}],"name":"setOpenDebug","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_spread","type":"uint256"}],"name":"setSpread","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"spread","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_orderID","type":"uint256"},{"internalType":"uint256","name":"_triggerPrice","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"updateDecreaseOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_orderID","type":"uint256"},{"internalType":"uint256","name":"_triggerPrice","type":"uint256"},{"internalType":"uint256","name":"_tpPrice","type":"uint256"},{"internalType":"uint256","name":"_slPrice","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"updateIncreaseOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"vault","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]}'),we=n(34804),Le=n(59387),Te="0.003",Ce=function(e){ge()(f,e);var t,n,i,r,a,l,s,o,c,u,d,p,m=he()(f);function f(e,t,n,i,r,a){var l;return ve()(this,f),l=m.call(this,e,t,Ne.Mt,n),v()(Pe()(l),"_args",void 0),v()(Pe()(l),"_valid",void 0),v()(Pe()(l),"_fee",void 0),v()(Pe()(l),"_ctoken",void 0),l._args=i,l._valid=r,l._fee=a,l._ctoken=new Le.a(l._library,t,i.collateralToken,void 0),l}return fe()(f,[{key:"getClassName",value:function(){return"Market"}},{key:"getCollateralToken",value:function(){return this._ctoken}},{key:"getOpenFeeRate",value:function(){var e;return null!==(e=this.formatFeeOrRate(this._fee.openFeeRate))&&void 0!==e?e:Te}},{key:"getCloseFeeRate",value:function(){var e;return null!==(e=this.formatFeeOrRate(this._fee.closeFeeRate))&&void 0!==e?e:Te}},{key:"getExecFee",value:function(){return this.formatNum(this._fee.execFee)}},{key:"getCleanFee",value:function(){var e;return this.formatNum(null===(e=this._fee)||void 0===e?void 0:e.liquidateFee)}},{key:"getSlippageDecimals",value:function(e){var t=4;return this._valid.slippageDigits.isZero()||(t=this._valid.slippageDigits.toNumber()),(0,we.H2)(e,t)}},{key:"getFeeDecimals",value:function(e){return(0,we.H2)(e,8)}},{key:"getNumDecimals",value:function(e){var t=18;return this._args.tokenDigits.isZero()||(t=this._args.tokenDigits.toNumber()),(0,we.H2)(e,t)}},{key:"parseNumber",value:function(e,t){return(0,we.H2)(e,t)}},{key:"getPriceDecimals",value:function(e){return(0,we.H2)(e,30)}},{key:"formatPrice",value:function(e){return(0,we.dN)(e,30)}},{key:"getTokenDigits",value:function(){return this._args.tokenDigits.toNumber()}},{key:"formatNum",value:function(e,t,n,i){return(0,we.dN)(e,this._args.tokenDigits.toNumber(),t,n,i)}},{key:"formatFeeOrRate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return(0,we.dN)(e,t)}},{key:"formatPercentage",value:function(e){return(0,we.H2)(e,2)}},{key:"allowance",value:(p=b()(h()().mark((function e(t){var n;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCollateralToken().allowance(t,this._address);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"approve",value:(d=b()(h()().mark((function e(t,n,i){var r,a;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Le.a(this._library,this._chainId,this._args.collateralToken,void 0),e.next=3,r.allowance(t,this._address);case 3:if(!e.sent.lt(n)&&!i){e.next=9;break}return a=(0,we._b)(1e3),e.next=8,r.approve(this._address,n.mul(a));case 8:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return d.apply(this,arguments)})},{key:"increaseTrade",value:(u=b()(h()().mark((function e(t,n,i){var r;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.approve(t.account,n);case 2:if(!e.sent){e.next=8;break}return e.next=6,this.send("increaseTrade",[t.isLimit,t.payDelta,t.sizeDelta,t.price,t.tpPrice,t.slPrice,t.slippage,t.isLong,!1],i);case 6:return r=e.sent,e.abrupt("return",r);case 8:return e.abrupt("return",Promise.resolve(""));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return u.apply(this,arguments)})},{key:"decreaseTrade",value:(c=b()(h()().mark((function e(t){var n;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("decreaseTrade",[t.isLimit,t.sizeDelta,t.isKeepLev,t.price,t.slippage,t.isLong,!1]);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"increaseCollateral",value:(o=b()(h()().mark((function e(t,n){var i;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("increaseCollateral",[t,n]);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"decreaseCollateral",value:(s=b()(h()().mark((function e(t,n){var i;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("decreaseCollateral",[(0,we._b)(t),n]);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"updateIncreaseOrder",value:(l=b()(h()().mark((function e(t,n,i,r,a){var l;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("updateIncreaseOrder",[t,n,i,r,a]);case 2:return l=e.sent,e.abrupt("return",l);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n,i,r){return l.apply(this,arguments)})},{key:"updateDecreaseOrder",value:(a=b()(h()().mark((function e(t,n,i){var r;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("updateDecreaseOrder",[t,n,i]);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"cancelOrder",value:(r=b()(h()().mark((function e(t,n,i){var r;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("cancelOrder",[t,n,i]);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"cancelOrderList",value:(i=b()(h()().mark((function e(t,n,i){var r;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("cancelOrderList",[t,n,i]);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return i.apply(this,arguments)})},{key:"getCtokenDecimals",value:(n=b()(h()().mark((function e(){var t,n,i;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this._ctoken)||void 0===t||null===(n=t._contract)||void 0===n?void 0:n.decimals();case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"formatCToken",value:(t=b()(h()().mark((function e(t){var n;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCtokenDecimals();case 2:return n=e.sent,e.abrupt("return",(0,we.dN)(t,n));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),f}(be.k),ke=function(e){ge()(s,e);var t,n,i,r,a,l=he()(s);function s(e,t){return ve()(this,s),l.call(this,e,t,_e.Mt)}return fe()(s,[{key:"getClassName",value:function(){return"MarketReader"}},{key:"getMarket",value:(a=b()(h()().mark((function e(t){var n,i;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getMarket",t);case 2:return n=e.sent,i=new Ce(this._library,this._chainId,t,n.mktOuts,n.validOuts,n.feeOuts),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getFundingRate",value:(r=b()(h()().mark((function e(t,n){var i;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getFundingRate",t,n);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"getFundingFee",value:(i=b()(h()().mark((function e(t,n,i){var r;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getFundingFee",t,n,i);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return i.apply(this,arguments)})},{key:"getPositions",value:(n=b()(h()().mark((function e(t,n){var i;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getPositions",t,n);case 2:return null==(i=e.sent)||i.forEach((function(e){e.realisedPnl.mul(e.hasProfit?1:-1)})),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"availableLiquidity",value:(t=b()(h()().mark((function e(t,n,i){var r;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("availableLiquidity",n,t,i);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,n,i){return t.apply(this,arguments)})}]),s}(be.k),Se=function(){var e=b()(h()().mark((function e(t,n,i,r,a,l,s){var o,c,u;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new ke(l,i),e.next=3,o.getMarket(r);case 3:return(c=e.sent).setChainId(i),c.setPendingTxns(n),u=f()(f()({},{accountAddress:"",isLimit:!1,isLong:!0,price:"0",amount:"0",size:"0",avlb:"0",pay:"0",leverage:"10",entryPrice:"0",liqPrice:"0",positionFee:"0",executionFee:"0",fundFeeRate:"0",availableLiquidity:"0",slippage:"0.3",openFeeRate:"0",closeFeeRate:"0",Positions:[],Orders:[],Trades:[]}),{},{symbol:(0,ne.D4)(a),accountAddress:s,reader:o,market:c,library:l,marketName:a}),e.next=9,Fe(u,t);case 9:return u=e.sent,e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)})));return function(t,n,i,r,a,l,s){return e.apply(this,arguments)}}();function Fe(e,t){return Ie.apply(this,arguments)}function Ie(){return(Ie=b()(h()().mark((function e(t,n){var i,r;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.entryPrice=n,!t.market){e.next=22;break}return e.prev=2,e.next=5,t.market.getCtokenDecimals();case 5:t.ctokenDecimals=e.sent,t.openFeeRate=t.market.getOpenFeeRate(),t.closeFeeRate=t.market.getCloseFeeRate(),t.executionFee=t.market.getExecFee(),t.cleanFee=null==t||null===(i=t.market)||void 0===i?void 0:i.getCleanFee(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log("getDefaultSwap",e.t0);case 15:if(!t.accountAddress){e.next=22;break}return e.next=18,t.market.getCollateralToken().balanceOf(t.accountAddress);case 18:return r=e.sent,e.next=21,t.market.formatCToken(r);case 21:t.avlb=e.sent;case 22:return e.abrupt("return",t);case 23:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}var Me={getEstimatedPNL:function(e){var t=e.isLong,n=e.entryPrice,i=e.price,r=e.size,a=t?1:-1;return(0,G.Q6)(a).multipliedBy(i.minus(n)).multipliedBy(r).dividedBy(n)},getEntryPriceDisplay:function(e,t,n,i){var r=(0,G.Q6)((null==i?void 0:i.averagePrice)||0),a=e;if(i){var l=t.plus(i.size||0);a=e.multipliedBy(l).dividedBy(l[n?"plus":"minus"]((0,G.Q6)((null==i?void 0:i.PNL)||0)))}return{rise:a.minus(r).toNumber(),mergePositionPrice:a,existingPositionPrice:r}},getFeeRate:function(e,t){return(0,G.Q6)(1).dividedBy(t).plus(e)},getExecFee:function(e){return(0,G.Q6)(e)},getFundFee:function(e,t){return b()(h()().mark((function n(){var i,r,a;return h()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null==e||null===(i=e.reader)||void 0===i?void 0:i.getFundingFee(null==e?void 0:e.accountAddress,null==e||null===(r=e.market)||void 0===r?void 0:r._address,t);case 2:return a=n.sent,n.abrupt("return",e.market.formatNum(a));case 4:case"end":return n.stop()}}),n)})))()},getFundFeeRete:function(e,t){return b()(h()().mark((function n(){var i,r;return h()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.reader.getFundingRate(e.market._address,t);case 2:return i=n.sent,r=e.market.formatFeeOrRate(null==i?void 0:i[0]),n.abrupt("return",r);case 5:case"end":return n.stop()}}),n)})))()},getFundFeeRateLimit:function(e,t){var n;if(!e)return"0";var i=(0,G.Q6)("0.0000208333"),r=i;return(0,G.Q6)(e).abs().minus(i).gt(0)&&(r=r.multipliedBy(t?1:-1)),null===(n=r)||void 0===n?void 0:n.toString()},getFundFeeRateDisplay:function(e,t){if(!e)return"-";var n=(0,G.Q6)("0.0000208333"),i=(0,G.Q6)(e),r=n.multipliedBy(100);return i.abs().minus(n).gt(0)&&(r=i.multipliedBy(100).multipliedBy(t?1:-1)),r.toFixed(4,1)},getConfirmStat:function(e){var t=e.pay,n=e.openFee,i=e.executionFee,r=e.size,a=e.leverageOption,l=e.existingPosition,s=e.hasExistingPosition,o=e.cleanFee;return{getCollateralDisplay:function(){var e=t.minus(n).minus(i),r=e;return s&&l&&(r=(0,G.Q6)(l.initialCollateral).minus((0,G.Q6)(l.fundingFee||0)).plus(t).minus(n).minus(i)),{rise:r.minus(e).toNumber(),mergePositionPrice:r,existingPositionPrice:(0,G.Q6)(null==l?void 0:l.collateral)}},getLigPriceDisplay:function(e,t,n,i){var r=(0,G.Q6)((null==l?void 0:l.liqPrice)||"0"),a=Me.getNextLiqPrice({size:this.getNextSizeDisplay().mergePositionPrice,collateral:this.getCollateralDisplay().mergePositionPrice,isLong:n,fundingFee:(0,G.Q6)((null==l?void 0:l.fundingFee)||0),positionFeeRate:i,entryPrice:e,maxLeverage:t,cleanFee:o},"Swap liq.Price");return{rise:a.minus(r).toNumber(),existingPositionPrice:r,mergePositionPrice:a}},getLeverageDisplay:function(){var e=(0,G.Q6)(a);if(!s)return{rise:0,existingPositionPrice:e,mergePositionPrice:e};var t=this.getCollateralDisplay(),n=this.getNextSizeDisplay().mergePositionPrice.dividedBy(t.mergePositionPrice);return{rise:n.minus(e).toNumber(),existingPositionPrice:(0,G.Q6)((null==l?void 0:l.leverage)||"0"),mergePositionPrice:n}},getNextSizeDisplay:function(){var e=(0,G.Q6)(s&&(null==l?void 0:l.size)||0),t=r.plus(e),n=l?e:t;return{existingPositionPrice:n,mergePositionPrice:t,rise:t.minus(n).toNumber()}}}},getNextLiqPrice:function(e,t){var n=e.size,i=e.entryPrice,r=e.isLong,a=e.positionFeeRate,l=e.fundingFee,s=e.maxLeverage,o=e.collateral,c=e.amount,u=e.cleanFee;if(n.eq(0))return(0,G.Q6)(0);null==s&&(s=(0,G.Q6)(200)),null==c&&(c=(0,G.Q6)(0));var d=n.dividedBy(s||30),p="".concat(n.toNumber(),"/").concat(s||30,"}");u.gt(d)&&(d=u,p="5");var v=n.multipliedBy(a||0),m="".concat(n.toNumber()," * ").concat(null==a?void 0:a.toNumber()),f=n.minus(o).plus(l).plus(v).plus(d),y="".concat(n.toNumber()," - ").concat(o.toNumber()," + ").concat(l.toNumber(),"+ ").concat(m," + ").concat(p);r||(f=n.plus(o).minus(l).minus(v).minus(d),y="".concat(n.toNumber()," + ").concat(o.toNumber()," - ").concat(l.toNumber()," - ").concat(m," - ").concat(p)),null!=c&&f[r?"minus":"plus"](c);var g=f.dividedBy(n).multipliedBy(i);return t&&console.log(t,"(".concat(y,")/").concat(n.toNumber(),"*").concat(i.toNumber())),g},getCoinBasedSizeByUSD:function(e,t){return e.dividedBy(t)},getNextPay:function(e,t,n,i){return(0,G.Q6)(e).multipliedBy(Me.getFeeRate(n,i)).multipliedBy((0,G.Q6)(t))},getNextAmount:function(e,t,n,i){return e.gt(0)?e.dividedBy(Me.getFeeRate(n,i)).dividedBy(t):(0,G.Q6)(0)},getSize:function(e,t,n){return e.gt(0)?(0,G.Q6)(e).dividedBy(Me.getFeeRate(t,n)):(0,G.Q6)(0)},getPayBySize:function(e,t,n){return!e||e.eq(0)?(0,G.Q6)(0):e.multipliedBy(Me.getFeeRate(t,n))},getOpenFee:function(e,t){return e.multipliedBy(t)}},Oe=n(1463),De="trade____bxq4",Ae=n(59277),Ee=n(71609),ze=n(94687),Re=function(e){return null!=e&&e.length?"("+((null==e?void 0:e.length)>=99?"99+":e.length)+")":""},Qe=function(){var e=b()(h()().mark((function e(t){var n,i,r,a,l,s,o,c,u,d,p,v,m,y,g;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.accountAddress&&""!=t.accountAddress){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,t.reader.getPositions(t.accountAddress,t.market._address);case 4:r=e.sent,a=t.openFeeRate,l=t.executionFee,s=[],r=null===(n=r)||void 0===n||null===(i=n.filter((function(e){return+e.size>0})))||void 0===i?void 0:i.sort((function(e,t){var n,i;return+(null==t||null===(n=t.lastTime)||void 0===n?void 0:n.toString())-+(null==e||null===(i=e.lastTime)||void 0===i?void 0:i.toString())})),o=0;case 10:if(!(o<r.length)){e.next=22;break}return e.next=13,Me.getFundFee(t,null===(c=r[o])||void 0===c?void 0:c.isLong);case 13:return m=e.sent,e.next=16,Me.getFundFeeRete(t,null===(u=r)||void 0===u||null===(d=u[o])||void 0===d?void 0:d.isLong);case 16:y=e.sent,g=Me.getFundFeeRateLimit(y,null===(p=r)||void 0===p||null===(v=p[o])||void 0===v?void 0:v.isLong),s.push(Be(t,f()(f()({},r[o]),{},{fundingFee:m,fundFeeRate:g}),t.accountAddress,a,l));case 19:o++,e.next=10;break;case 22:return e.abrupt("return",s);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Be(e,t,n,i,r){var a=e.market;try{var l,s=f()(f()({},t),{},{market:null==a?void 0:a._address,account:n,isLong:t.isLong,size:a.formatNum(t.size),collateral:"0",averagePrice:a.formatPrice(t.averagePrice),fundingFee:(null==t?void 0:t.fundingFee)||"0",realisedPnl:a.formatNum(t.realisedPnl),hasProfit:t.hasProfit,lastTime:t.lastTime,pair:e.marketName,side:t.isLong?"Long":"Short",leverage:"",netValue:"0",PNL:"0",PNLRate:"0",liqPrice:"0",initialCollateral:a.formatNum(t.collateral),fundFeeDay:"0",openCloseFees:"0",PNLAfterFees:"0",orderIDs:null==t?void 0:t.orderIDs,feeRate:i,executionFee:r});s.collateral=(0,G.Q6)(s.initialCollateral).minus(s.fundingFee).toString(),s.leverage="0"===s.collateral?"0":(0,G.Q6)(s.size).dividedBy(s.collateral).toString();var o=null==e?void 0:e.openFeeRate,c=null==a||null===(l=a._valid)||void 0===l?void 0:l.maxLev,u=(0,G.Q6)((null==c?void 0:c.toNumber())||100),d=(0,G.Q6)(null==e?void 0:e.cleanFee);return s.liqPrice=He(s,i,u,(0,G.Q6)(o),d),s}catch(e){console.log("convertRow",e)}return{}}function He(e,t,n,i,r,a){var l,s=e.fundingFee,o=e.isLong,c=e.collateral,u=e.size,d=(0,G.Q6)(u).multipliedBy(t);return e.positionFee=d.toString(),null===(l=Me.getNextLiqPrice({size:(0,G.Q6)(u),collateral:(0,G.Q6)(c),isLong:o,fundingFee:(0,G.Q6)(s),positionFeeRate:i,entryPrice:(0,G.Q6)(null==e?void 0:e.averagePrice),maxLeverage:n,cleanFee:r},a))||void 0===l?void 0:l.toString()}function Ze(e,t,n){var i=(0,G.Q6)(e.initialCollateral),r=((0,G.Q6)(e.collateral),(0,G.Q6)(e.indexPrice)),a=(0,G.Q6)(e.averagePrice),l=(0,G.Q6)(e.size),s=(0,G.Q6)(e.isLong?1:-1).multipliedBy(r.minus(a)).multipliedBy(l).dividedBy(a);e.PNL=s.toString(),function(e,t,n){var i,r,a,l,s=(0,G.Q6)(e.size),o=(0,G.Q6)(t),c=s.multipliedBy(o).multipliedBy(2);e.openCloseFee=null===(i=s.multipliedBy(o).multipliedBy(1))||void 0===i?void 0:i.toString(),e.fundFeeDay=s.multipliedBy(n).multipliedBy(24).toString(),e.PNLAfterFees=null===(r=(0,G.Q6)(null==e?void 0:e.PNL).minus(c).minus((0,G.Q6)(null==e?void 0:e.fundingFee)))||void 0===r?void 0:r.toString(),e.pnlAfterFeesRate=null===(a=(0,G.Q6)(null==e?void 0:e.PNLAfterFees).div((0,G.Q6)(null==e?void 0:e.initialCollateral)))||void 0===a||null===(l=a.multipliedBy(100))||void 0===l?void 0:l.toString()}(e,t,n);var o=i.plus(s).minus(null==e?void 0:e.fundingFee).minus(null==e?void 0:e.openCloseFee);return e.PNLRate=s.div(i).multipliedBy(100).toString(),e.netValue=o.toString(),s.toString()}var Ve=(0,c.cn)({key:"coinBased",default:void 0}),Ue=(0,c.nZ)({key:"isCoinBased",get:function(e){return"USD"!==(0,e.get)(Ve)}}),qe=(0,c.cn)({key:"Position",default:[]}),Je=(0,c.cn)({key:"Orders",default:[]}),Ge=(0,c.cn)({key:"Trades",default:[]}),Ye=(0,c.cn)({key:"isHideOtherPairsAtom",default:!1}),Ke=(0,c.nZ)({key:"positionSelector",get:function(e){var t=e.get,n=t(d.O7);return(0,ze.Z)(n)?[]:t(qe).filter((function(e){var n;return!t(Ye)||e.pair===(null===(n=t(d.bI))||void 0===n?void 0:n.name)})).map((function(e){var t,i,r=f()(f()({},e),{},{indexPrice:null===(t=n[(0,ne.do)(e.pair).toLowerCase()])||void 0===t||null===(i=t.indexPrice)||void 0===i?void 0:i.toString()});return Ze(r,null==e?void 0:e.feeRate,null==e?void 0:e.fundFeeRate),r}))}}),We=(0,c.nZ)({key:"ordersSelector",get:function(e){var t=e.get,n=t(d.O7);return(0,ze.Z)(n)?[]:t(Je).filter((function(e){var n;return!t(Ye)||e.pair===(null===(n=t(d.bI))||void 0===n?void 0:n.name)})).map((function(e){var t,i;return f()(f()({},e),{},{indexPrice:(null===(t=n[(0,ne.do)(e.pair).toLowerCase()])||void 0===t||null===(i=t.indexPrice)||void 0===i?void 0:i.toString())||"0"})}))}}),Xe=(0,c.nZ)({key:"tradeSelector",get:function(e){var t=e.get;return t(Ge).filter((function(e){var n;return!t(Ye)||e.pair===(null===(n=marketSelection)||void 0===n?void 0:n.name)}))}}),$e=(0,c.nZ)({key:"positionCountSelector",get:function(e){var t=e.get;return Re(t(qe))}}),et=(0,c.nZ)({key:"orderCount",get:function(e){var t=e.get;return Re(t(Je))}}),tt=n(2260),nt=20,it="pagination___G6LEV",rt="button___UgNoK";function at(e){var t=e.data,n=e.pageIndex,i=e.setPageIndex,r=e._data,a=(0,o.useMemo)((function(){return n===Math.ceil((null==r?void 0:r.length)/nt)}),[n,r]);return(0,V.jsxs)("div",{className:it,children:[n>1&&(0,V.jsx)(tt.Z,{className:rt,type:"c20",onClick:function(){i(n-1)},children:(0,V.jsx)("div",{children:"Prev"})}),t&&t.length>=nt&&!a&&(0,V.jsx)(tt.Z,{className:rt,type:"c20",onClick:function(){i(n+1)},children:(0,V.jsx)("div",{children:"Next"})})]})}var lt=Object.defineProperty,st=Object.getOwnPropertySymbols,ot=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable,ut=(e,t,n)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const dt=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))ot.call(t,n)&&ut(e,n,t[n]);if(st)for(var n of st(t))ct.call(t,n)&&ut(e,n,t[n]);return e})({width:80,height:80,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{opacity:.12,fillRule:"evenodd",clipRule:"evenodd",d:"M66.668 46.667c0-18.41-14.924-33.334-33.333-33.334v5c15.648 0 28.333 12.686 28.333 28.334h5Zm-8.324 0c0-13.808-11.193-25-25-25h-.01v5.166h.012c10.954 0 19.833 8.88 19.833 19.834h5.165Zm-7.332 17.677a24.926 24.926 0 0 0 7.144-14.677H52.94a19.78 19.78 0 0 1-5.583 11.023l3.654 3.654ZM15.656 28.99a24.927 24.927 0 0 1 14.678-7.144v5.213a19.78 19.78 0 0 0-11.025 5.584l-3.653-3.653Zm17.679 34.344C42.539 63.333 50 55.871 50 46.667 50.002 37.462 42.54 30 33.335 30c-9.205 0-16.667 7.462-16.667 16.667h5C21.668 40.223 26.891 35 33.335 35 39.778 35 45 40.223 45 46.667c0 6.443-5.223 11.666-11.666 11.666v5Z",fill:"url(#default_svg__a)"}),o.createElement("rect",{x:1,y:1,width:78,height:78,rx:39,stroke:"url(#default_svg__b)",strokeOpacity:.12,strokeWidth:2}),o.createElement("defs",null,o.createElement("linearGradient",{id:"default_svg__a",x1:15.656,y1:13.333,x2:78.101,y2:30.645,gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#3CEAAA"}),o.createElement("stop",{offset:.771,stopColor:"#5C72FF"})),o.createElement("linearGradient",{id:"default_svg__b",x1:0,y1:0,x2:97.93,y2:27.149,gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#3CEAAA"}),o.createElement("stop",{offset:.771,stopColor:"#5C72FF"}))));var pt="default___EwMje",vt="icon___urVDk",mt=function(e){var t=e.text;return(0,V.jsx)("div",{className:pt,children:(0,V.jsxs)("div",{className:vt,children:[(0,V.jsx)(dt,{}),(0,V.jsx)("div",{children:t})]})})},ft="colorGrn___KLrrw",yt="colorRed___dWF0l",gt=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return+e>=0?(0,V.jsx)("span",{className:P()(v()({},ft,n)),children:"".concat((0,ae.xP)(e,void 0,"+$"),"(").concat((0,ae.xP)(t,void 0,"+"),"%)")}):(0,V.jsx)("span",{className:P()(v()({},yt,n)),children:"".concat((0,ae.xP)(Math.abs(+e).toString(),void 0,"-$"),"(").concat((0,ae.xP)(Math.abs(+t).toString(),void 0,"-"),"%)")})},xt="card___tsQVf",ht="table___aXY5t",_t="colorGrn___kLWyZ",bt="colorRed___i8TYm",jt="containerH5___PZhTu",Pt="orderListItem___HY67m",Nt="pair___pZNcc",wt="pairLeft___iDcUx",Lt="pos___M0sff",Tt="limit___uwUie",Ct="orderListItemContent___Nz2ZH",kt="label___RLBGg",St="text___k9r6s",Ft="long___fQO97",It="short___X_7_i",Mt=function(e){var t=e.data;return(0,V.jsx)("div",{className:jt,children:t.map((function(e){var t;return(0,V.jsxs)("div",{className:Pt,children:[(0,V.jsxs)("div",{className:Nt,children:[(0,V.jsxs)("div",{className:wt,children:[(0,V.jsx)("div",{children:e.market}),(0,V.jsx)("div",{className:P()(Lt,(t={},v()(t,Ft,e.isLong),v()(t,It,!e.isLong),t)),children:e.isLong?"Long":"Short"})]}),(0,V.jsx)("div",{className:Tt,children:(0,V.jsx)(Ee._H,{id:"Limit"})})]}),[{renderTitle:function(){return(0,V.jsx)(Ee._H,{id:"Size"})},value:(0,G.dp)(e.size,2).display()},{renderTitle:function(){return(0,V.jsx)(Ee._H,{id:"Collateral"})},value:(0,G.dp)(e.collateral,2).display({prefix:null!=e&&e.isIncrease?"+$":"-$"})},{renderTitle:function(){return(0,V.jsx)(Ee._H,{id:"Price"})},value:e.fromOrder?(0,G.dp)(e.price).display({prefix:e.triggerAbove?">$":"<$"}):(0,G.dp)(e.price).display()},{renderTitle:function(){return"PNL"},value:+(null==e?void 0:e.PNL)>0?gt(null==e?void 0:e.PNL,(Math.floor(1e4*+(null==e?void 0:e.PNLRate))/100).toString()):"-"},{renderTitle:function(){return(0,V.jsx)(Ee._H,{id:"Time"})},value:(0,ae.mr)(null==e?void 0:e.timestamp)||""},{renderTitle:function(){return(0,V.jsx)(Ee._H,{id:"Status"})},value:e.status}].map((function(e,t){return(0,V.jsxs)("div",{className:Ct,children:[(0,V.jsx)("span",{className:kt,children:e.renderTitle()}),(0,V.jsx)("span",{className:St,children:e.value})]})}))]})}))})},Ot=n(37216),Dt=function(e){var t=e.data,n=function(e){var t,n,i,r,a=e.type,l=e.side,s=null==l||null===(t=l.split(" "))||void 0===t||null===(n=t[0])||void 0===n?void 0:n.toLowerCase();return null!=a&&null!==(i=a.toLowerCase())&&void 0!==i&&i.includes("deposit")?"+$":null!=a&&null!==(r=a.toLowerCase())&&void 0!==r&&r.includes("withdraw")?"-$":"open"===s?"+$":"close"===s?"-$":"$"},i=[{title:"Pair",width:"10%",key:"market",dataIndex:"market"},{width:"10%",title:"Side",render:function(e){var t;return(0,V.jsx)("div",{className:P()((t={},v()(t,_t,"Long"===e.side||"Open Long"===e.side||"Close Short"===e.side),v()(t,bt,"Short"===e.side||"Open Short"===e.side||"Close Long"===e.side),t)),children:null==e?void 0:e.side})}},{width:"15%",title:"Type",dataIndex:"type",key:"type"},{width:"10%",title:"Size",dataIndex:"size",render:function(e){return(0,G.dp)(e).display()}},{width:"10%",title:"Collateral",render:function(e){return(0,G.dp)(e.collateral).display({prefix:n(e)})}},{width:"10%",title:"Price",dataIndex:"price",render:function(e,t){return t.fromOrder?(0,G.dp)(e).display({prefix:t.triggerAbove?">$":"<$"}):(0,G.dp)(e).display()}},{width:"10%",title:"PNL",render:function(e){return(0,V.jsx)("span",{children:0!=+(null==e?void 0:e.PNL)?gt(null==e?void 0:e.PNL,(Math.floor(1e4*+(null==e?void 0:e.PNLRate))/100).toString()):"-"})}},{width:"10%",title:"Time",dataIndex:"timestamp",key:"timestamp",render:function(e){return(0,ae.mr)(e)||""}},{width:"15%",title:"Status",dataIndex:"status",key:"Status"}];return(0,V.jsx)(Ot.ZP,{emptyText:"",className:ht,data:t,columns:i})},At=(0,ne.tq)()?Mt:Dt,Et=function(e){var t=(0,c.sJ)(Xe),n=(0,o.useState)(1),i=l()(n,2),r=i[0],a=i[1],s=(0,o.useMemo)((function(){var e=r*nt,n=e-nt;return t.slice(n,e)}),[r,t]);return(0,V.jsxs)("div",{className:xt,children:[(0,V.jsx)(At,{data:s}),!(null!=s&&s.length)&&(0,V.jsx)(mt,{text:"No trades yet"}),(null==s?void 0:s.length)&&(0,V.jsx)(at,{data:s,pageIndex:r,setPageIndex:a,_data:t})]})},zt=n(61145),Rt=function(){var e=b()(h()().mark((function e(t,n,i){var r,a,l;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,zt.x7)(i),a='query myQuery {\n    orders(orderDirection: desc, orderBy: timestamp,where: {account: "'.concat(null==t?void 0:t.toLowerCase(),'", marketName:"').concat(n,'", isDeleted: false}){\n          id\n          tp\n          sl\n          market\n          timestamp\n          collateral\n          triggerPrice\n          timestamp\n          isLong\n          isIncrease\n          orderId\n          size\n          triggerAbove\n        }\n      }\n      '),e.next=4,(0,zt.Dw)(r,a);case 4:return l=e.sent,e.abrupt("return",(null==l?void 0:l.orders)||[]);case 6:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),Qt=function(){var e=b()(h()().mark((function e(t){var n,i,r;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=t.accountAddress&&null!=t.accountAddress){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,Rt(t.accountAddress,null==t?void 0:t.marketName,null==t||null===(n=t.market)||void 0===n?void 0:n._chainId);case 4:return i=e.sent,r=[],i.forEach((function(e){var n=Bt(e,t);r.push(n)})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Bt(e,t){var n,i,r,a,l,s,o,c=null!=e&&e.isIncrease?"Limit":"Trigger",u=null!=e&&e.isIncrease?"Open":"Close",d=e.isIncrease;t.openFeeRate;return f()(f()({},e),{},{pair:null==t?void 0:t.marketName,orderID:e.orderId,type:c,side:null!=e&&e.isLong?u+" Long":u+" Short",collateral:null==t||null===(n=t.market)||void 0===n||null===(i=n.formatNum(e.collateral))||void 0===i?void 0:i.toString(),triggerPrice:null==t||null===(r=t.market)||void 0===r?void 0:r.formatPrice(e.triggerPrice),tp:d?null==t||null===(a=t.market)||void 0===a?void 0:a.formatPrice(e.tp):"0",sl:d?null==t||null===(l=t.market)||void 0===l?void 0:l.formatPrice(e.sl):"0",time:(0,ae.mr)(e.timestamp),isIncrease:null==e?void 0:e.isIncrease,isLong:null==e?void 0:e.isLong,size:null!==(s=null==t||null===(o=t.market)||void 0===o?void 0:o.formatNum(null==e?void 0:e.size))&&void 0!==s?s:"0"})}var Ht=n(31927),Zt=n(79487),Vt=function(){var e=b()(h()().mark((function e(){var t,n,i,r,a,l,s=arguments;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,n=s.length>1?s[1]:void 0,i=(0,zt.x7)(n),r=null!=t?'account:"'+(null==t?void 0:t.toLowerCase())+'"':"",a="query MyQuery {\n      trades(orderDirection: desc, orderBy: timestamp,where: {".concat(r,"}) {\n        collateral\n        pnl\n        price\n        size\n        side\n        timestamp\n        type\n        status\n        market\n        fromOrder\n        triggerAbove\n      }\n    }\n      "),e.next=7,(0,zt.Dw)(i,a);case 7:return l=e.sent,e.abrupt("return",null!=l&&l.trades?(0,Zt.Z)(null==l?void 0:l.trades,null==l?void 0:l.orders)||[]:(null==l?void 0:l.orders)||[]);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ut=function(){var e=b()(h()().mark((function e(t){var n,i,r;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=t.accountAddress&&null!=t.accountAddress){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,Vt(t.accountAddress,null==t||null===(n=t.market)||void 0===n?void 0:n._chainId);case 4:return i=e.sent,r=[],i.forEach((function(e){r.push(qt(e,t))})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function qt(e,t){var n=t.market,i=f()(f()({},e),{},{type:(0,Ht.Z)(null==e?void 0:e.type),size:(0,ze.Z)(null==e?void 0:e.size)?"0":n.formatNum(null==e?void 0:e.size),collateral:n.formatNum(null==e?void 0:e.collateral),price:(0,ze.Z)(null==e?void 0:e.price)?"-":n.formatPrice(null==e?void 0:e.price),PNL:(0,ze.Z)(null==e?void 0:e.pnl)?"0":n.formatNum(null==e?void 0:e.pnl)});return i.PNLRate=(0,ze.Z)(null==e?void 0:e.pnl)?"-":i.PNL/i.collateral,i}var Jt=JSON.parse('{"abi":[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"uint256","name":"collateralDelta","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"sizeDelta","type":"uint256"},{"indexed":false,"internalType":"bool","name":"isLong","type":"bool"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"},{"indexed":false,"internalType":"int256","name":"pnl","type":"int256"},{"indexed":false,"internalType":"uint256","name":"execFee","type":"uint256"},{"indexed":false,"internalType":"int256","name":"fundFee","type":"int256"},{"indexed":false,"internalType":"uint256","name":"tradeFee","type":"uint256"},{"indexed":false,"internalType":"address","name":"market","type":"address"},{"indexed":false,"internalType":"address","name":"collateralToken","type":"address"},{"indexed":false,"internalType":"address","name":"indexToken","type":"address"},{"indexed":false,"internalType":"uint256","name":"category","type":"uint256"}],"name":"UpdatePosition","type":"event"}]}'),Gt=n(62602),Yt="switch___V_gYU",Kt="rounded___Q_7Ny",Wt="switchEnabled___Ca9FC",Xt=function(e){var t=e.checked,n=e.className,i=e.onChange;return(0,V.jsx)(Gt.r,{checked:t,className:P()(Yt,v()({},Wt,t),n),onChange:i,children:(0,V.jsx)("div",{className:Kt})})},$t=n(1232),en=n(80593),tn=n(26423),nn=Object.defineProperty,rn=Object.getOwnPropertySymbols,an=Object.prototype.hasOwnProperty,ln=Object.prototype.propertyIsEnumerable,sn=(e,t,n)=>t in e?nn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const on=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))an.call(t,n)&&sn(e,n,t[n]);if(rn)for(var n of rn(t))ln.call(t,n)&&sn(e,n,t[n]);return e})({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"m3 6 5 5 5-5",stroke:"#9597B5",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}));var cn=Object.defineProperty,un=Object.getOwnPropertySymbols,dn=Object.prototype.hasOwnProperty,pn=Object.prototype.propertyIsEnumerable,vn=(e,t,n)=>t in e?cn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const mn=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))dn.call(t,n)&&vn(e,n,t[n]);if(un)for(var n of un(t))pn.call(t,n)&&vn(e,n,t[n]);return e})({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm.7-9V4.6H7.3V6h1.4Zm0 6V7.467H7.3V12h1.4Z",fill:"#797B96"}));var fn=n(40947),yn="advanced___MBdTe",gn="header___ifyUh",xn="title___YOTQb",hn="collectIcon___x8hbZ",_n="collectedIcon___dhQWJ",bn="item___oTlSJ",jn="flex___RaHI3",Pn="label___E6FRI",Nn="questionIcon___bN9mo",wn="overlay___eaqfY",Ln="var___pOK0z",Tn="panel____HyG6",Cn="openPanel___unKQ2",kn=function(e){var t=(0,o.useState)(e.collect||!1),n=l()(t,2),i=n[0],r=n[1],a=e.ifSlippage,s=e.value,c=void 0===s?{}:s,u=e.stopLossPNL,d=e.onChange,p=e.ifStopLoss,m=e.ifTakeProfit,y=e.ifAll,g=e.tkpPNL,x=(0,o.useMemo)((function(){return"\n    When Index Price reaches ".concat(c.takeProfit||"--"," USD, it will trigger Take Profit, and the estimated PNL will be ").concat(g||"--"," USD.")}),[c.takeProfit,g]),h=(0,o.useMemo)((function(){return"When Index Price reaches ".concat(c.stopLoss||"--"," USD, it will trigger Stop Loss, and the estimated PNL will be ").concat(u||"--"," USD.")}),[c.stopLoss,u]);return(0,V.jsxs)("div",{className:yn,children:[(0,V.jsxs)("div",{className:gn,onClick:function(){r((function(e){return!e}))},children:[(0,V.jsx)("div",{className:xn,children:"Advanced"}),(0,V.jsx)(on,{className:P()(hn,v()({},_n,i))})]}),(0,V.jsxs)("div",{className:P()(Tn,v()({},Cn,i)),children:[(p||y)&&(0,V.jsx)("div",{className:bn,children:(0,V.jsx)(tn.ZP,{decimals:2,value:c.stopLoss,onChange:function(e){d(f()(f()({},c),{},{stopLoss:e}))},label:(0,V.jsxs)("div",{className:jn,children:[(0,V.jsx)("div",{className:Pn,children:"Stop Loss"}),(0,V.jsx)(fn.Z,{placement:"top",overlay:(0,V.jsx)("div",{className:wn,children:h}),children:(0,V.jsx)(mn,{className:Nn})})]}),children:(0,V.jsx)("div",{className:Ln,children:"USD"})})}),(m||y)&&(0,V.jsx)("div",{className:bn,children:(0,V.jsx)(tn.ZP,{decimals:2,value:c.takeProfit,onChange:function(e){d(f()(f()({},c),{},{takeProfit:e}))},label:(0,V.jsxs)("div",{className:jn,children:[(0,V.jsx)("div",{className:Pn,children:"Take Profit"}),(0,V.jsx)(fn.Z,{placement:"top",overlay:(0,V.jsx)("div",{className:wn,children:x}),children:(0,V.jsx)(mn,{className:Nn})})]}),children:(0,V.jsx)("div",{className:Ln,children:"USD"})})}),(a||y)&&(0,V.jsx)("div",{className:bn,children:(0,V.jsx)(tn.ZP,{value:c.slippage,decimals:2,onChange:function(e){d(f()(f()({},c),{},{slippage:e}))},label:(0,V.jsxs)("div",{className:jn,children:[(0,V.jsx)("div",{className:Pn,children:"Slippage"}),(0,V.jsx)(fn.Z,{placement:"top",overlay:(0,V.jsxs)("div",{className:wn,children:["Note that a low allowed slippage, e.g. less than 0.5%, may result in failed orders if prices are volatile."," "]}),children:(0,V.jsx)(mn,{className:Nn})})]}),children:(0,V.jsx)("div",{className:Ln,children:"%"})})})]})]})},Sn=Object.defineProperty,Fn=Object.getOwnPropertySymbols,In=Object.prototype.hasOwnProperty,Mn=Object.prototype.propertyIsEnumerable,On=(e,t,n)=>t in e?Sn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Dn=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))In.call(t,n)&&On(e,n,t[n]);if(Fn)for(var n of Fn(t))Mn.call(t,n)&&On(e,n,t[n]);return e})({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M7.652 12h2.319L13.5 8 9.97 4H7.653l2.795 3.234H2.5v1.532h7.947L7.652 12Z"}));var An="field___AEG_L",En="label___JBZb5",zn="value___dSa5M",Rn="nextValue___o1dcE",Qn="oldValue___XDLug",Bn="arrowRed___HnTAV",Hn="arrowGrn___ttBc1",Zn=function(e,t,n,i,r){var a,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=l.ntAppend,o=void 0===s?r:s,c=l.ntPrefix,u=void 0===c?i:c,d=function(e,t){var n;return n={},v()(n,Hn,+e<+t),v()(n,Bn,+e>+t),n},p=n&&+n!=+t;return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:An,children:[(0,V.jsx)("div",{className:En,children:e}),(0,V.jsxs)("div",{className:zn,children:[(0,V.jsx)("div",{className:P()((a={},v()(a,"".concat(zn," ").concat(Qn),p),v()(a,Rn,!p),a)),children:!Number.isNaN(t)&&isFinite(+t)&&"".concat(i||"").concat((0,ae.xP)(t)).concat(r||"")||ae.PW}),p&&!Number.isNaN(n)&&isFinite(+n)&&(0,V.jsxs)("div",{className:Rn,children:[(0,V.jsx)("span",{className:P()(d(t,n)),children:(0,V.jsx)(Dn,{})}),null==l?void 0:l.defaultValue,!(null!=l&&l.defaultValue)&&"".concat(u||"").concat(null!=l&&l.formatNextValue?l.formatNextValue(n):(0,ae.xP)(n,2,"","","")).concat(o||"")]})||""]})]})})},Vn={card:"card___fdBku",header:"header___mYjMg",title:"title___DaWZ7",right:"right___VLVON",switch:"switch___JvgPx",table:"table___fNLlk",pnl:"pnl___pZIIu",side:"side___qR1Jt",editCancel:"editCancel___JKw0Q",edit:"edit___DUhY3",submitBtn:"submitBtn___pc5K5",fields:"fields___FDpLc",field:"field___bbKYP",label:"label___CTyu8",value:"value___madrW",old:"old___XZbZw",new:"new___sFZEB",colorGrn:"colorGrn___FQhdW",colorRed:"colorRed___WPYKL",container:"container___FOa3G",orderListItem:"orderListItem___Gatca",pair:"pair___FE70j",pairLeft:"pairLeft___qFO3w",pos:"pos___d4i57",limit:"limit___fouyr",orderListItemContent:"orderListItemContent___vcvzS",text:"text___Kq6d1",btnsH5:"btnsH5___X2Ryv",btnH5:"btnH5___PjA4_",long:"long___ViDnD",short:"short___GTRN3"},Un=function(e){return void 0===e||0==+e||(0,ze.Z)(e)?"":(0,G.Q6)(e||"").toFixed(2,1)},qn=function(e){var t,n,i=e.isVisible,r=e.setIsVisible,a=e.row,u=e.tradeShowArgs,d=e.successCb,p=(0,o.useState)(Un(null==a?void 0:a.triggerPrice)),v=l()(p,2),m=v[0],y=v[1],g=(0,s.Ge)(),x=g.active,h=g.account,_=(0,o.useState)(!1),b=l()(_,2),j=b[0],P=b[1],N=(0,o.useState)(Un(null==a?void 0:a.sl)),w=l()(N,2),L=w[0],T=w[1],C=(0,o.useState)(Un(null==a?void 0:a.tp)),k=l()(C,2),S=k[0],F=k[1],I=(0,c.sJ)(Ke),M=null==a?void 0:a.isLong,O=null==u||null===(t=u.market)||void 0===t||null===(n=t._valid)||void 0===n?void 0:n.maxLev,D=(0,G.Q6)((null==O?void 0:O.toNumber())||100),A=a.indexPrice,E=(0,o.useMemo)((function(){if(I&&I.length>0){var e="".concat(M?"Long":"Short");return I.find((function(t){return t.pair===(null==a?void 0:a.pair)&&t.account===h&&t.side===e}))}return null}),[I,M]),z=(0,o.useMemo)((function(){return Boolean(E&&E.size&&(0,G.Q6)(E.size).gt(0))}),[E]),R=(0,o.useMemo)((function(){var e,t,n=m,i=(0,G.Q6)(null==a?void 0:a.size),r=null==u?void 0:u.executionFee,l=(0,G.Q6)(r||0),s=null==u?void 0:u.openFeeRate,o=(0,G.Q6)(s||0),c=Me.getOpenFee(i,o),d=(0,G.Q6)(null!==(e=null==u?void 0:u.cleanFee)&&void 0!==e?e:"0"),p=Me.getEntryPriceDisplay((0,G.Q6)(null==a?void 0:a.triggerPrice),i,M,E),v=Me.getEntryPriceDisplay((0,G.Q6)(m),i,M,E),y=Me.getConfirmStat({size:(0,G.Q6)(null==a?void 0:a.size),leverageOption:0,executionFee:l,entryPrice:(0,G.Q6)(null==a?void 0:a.triggerPrice),existingPosition:E,positionFeeRate:(0,G.Q6)(s||0),hasExistingPosition:z,pay:(0,G.Q6)(null==a?void 0:a.collateral),openFee:c,cleanFee:d}),g=Me.getConfirmStat({size:(0,G.Q6)(null==a?void 0:a.size),leverageOption:0,executionFee:l,entryPrice:v.mergePositionPrice,existingPosition:E,positionFeeRate:(0,G.Q6)(s||0),hasExistingPosition:z,pay:(0,G.Q6)(null==a?void 0:a.collateral),openFee:c,cleanFee:d}).getLigPriceDisplay(v.mergePositionPrice,D,M,o),x=y.getLigPriceDisplay(p.mergePositionPrice,D,M,o),h=g.mergePositionPrice.toString(),_=E?null==E?void 0:E.liqPrice:x.mergePositionPrice.toString(),b=(0,G.Q6)(null==E?void 0:E.size).minus((0,G.Q6)(null==a?void 0:a.size)),j=(0,G.Q6)(null==E?void 0:E.initialCollateral).minus((0,G.Q6)(null==a?void 0:a.collateral)),P=null===(t=(0,G.Q6)(null==E?void 0:E.feeRate))||void 0===t?void 0:t.toString(),N=(0,G.Q6)(s),w=(0,G.Q6)(d),L=He(f()(f()({},a),{},{fundingFee:"0",size:b.toString(),collateral:j.toString(),averagePrice:null==E?void 0:E.averagePrice}),P,D,N,w);return{nextOrderPrice:n,nextLiqPrice:h,initLiqPrice:_,nextTriggerLiq:z?L:"0",initTriggerLiq:z?null==E?void 0:E.liqPrice:"0"}}),[m,null==E?void 0:E.PNL]),Q=R.nextOrderPrice,B=R.nextLiqPrice,H=R.initLiqPrice,Z=R.nextTriggerLiq,U=R.initTriggerLiq,q=(0,o.useMemo)((function(){return new $t.Z(m).isEqualTo(new $t.Z(null==a?void 0:a.triggerPrice))?H:B}),[m,D,A]),J=function(){var e=function(){if(!m)return"Enter A Price";if(null!=a&&a.isIncrease)if(null!=a&&a.isLong){if(+m>=+A)return"Price Above Current Price";if(""!=L){if(+L>=+m)return"Stop Loss Above Order Price";if(+L<=+B)return"Stop Loss Below Liq.Price"}if(""!=S&&+S<=+m)return"Take Profit Below Order Price"}else{if(+m<=+A)return"Price Below Current Price";if(""!=L){if(+L<=+m)return"Stop Loss Below Order Price";if(+L>=+B)return"Stop Loss Above Liq.Price"}if(""!=S&&+S>=+m)return"Take Profit Above Order Price"}else if(null!=a&&a.isLong){if(+m<=+Z)return"Price Below Liq.Price"}else if(+m>=+Z)return"Price Above Liq.Price";return j?"Updating Order...":""}();return e?{btnTxt:e,btnValid:!1}:{btnTxt:"Update Order",btnValid:!0}},Y=(0,o.useMemo)((function(){return J()}),[m,j,M,null==a?void 0:a.isIncrease,L,S,H,q,z,A,B,Z]),K=Y.btnTxt,W=Y.btnValid,X=(0,o.useMemo)((function(){return[S?Me.getEstimatedPNL({isLong:M,entryPrice:(0,G.Q6)(m),price:(0,G.Q6)(S),size:(0,G.Q6)(null==a?void 0:a.size)}).toFixed(2,1):"",L?Me.getEstimatedPNL({isLong:M,entryPrice:(0,G.Q6)(m),price:(0,G.Q6)(L),size:(0,G.Q6)(null==a?void 0:a.size)}).toFixed(2,1):""]}),[S,L,M,m]),$=l()(X,2),ee=$[0],te=$[1];return(0,V.jsx)("div",{className:Vn.modal,children:(0,V.jsxs)(en.Z,{title:"Edit ".concat(null==a?void 0:a.type," Order"),onClose:function(){return r(!1)},visible:i,width:512,children:[(0,V.jsx)(tn.tV,{value:m,onChange:y,decimals:2}),(null==a?void 0:a.isIncrease)&&(0,V.jsx)(kn,{value:{stopLoss:L,takeProfit:S},ifStopLoss:!0,ifTakeProfit:!0,onChange:function(e){T((null==e?void 0:e.stopLoss)||""),F((null==e?void 0:e.takeProfit)||"")},tkpPNL:ee,stopLossPNL:te}),(0,V.jsxs)("div",{className:Vn.fields,children:[Zn("Order Price",null==a?void 0:a.triggerPrice,m,null!=a&&a.triggerAbove?">$":"<$","",{ntPrefix:+Q<+A?"<$":">$"}),Zn("Index Price",A,"","$"),z?null!=a&&a.isIncrease?Zn("Liq Price",H,B,"$"):Zn("Liq Price",U,Z,"$"):null!=a&&a.isIncrease?Zn("Liq Price",B,"","$"):Zn("Liq Price","-","-","$")]}),(0,V.jsx)(tt.Z,{className:Vn.submitBtn,disabled:j||!W,onClick:function(){x&&h&&(P(!0),function(e,t,n,i,r,a,l){var s=e.market;return i?e.market.updateIncreaseOrder(+t,s.getPriceDecimals(n),s.getPriceDecimals(a||0),s.getPriceDecimals(l||0),r):e.market.updateDecreaseOrder(+t,s.getPriceDecimals(n),r)}(u,null==a?void 0:a.orderID,m,null==a?void 0:a.isIncrease,a.isLong,S,L).then((function(e){d(),r(!1)})).catch((function(e){return console.log("confirm",e)})).finally((function(){P(!1)})))},children:K})]})})},Jn=n(39585),Gn="overlay___ob7Kb",Yn="overlayTitle___Qu9fp",Kn="overlayContent___FYtAF",Wn="coinBaseSize____bRmf",Xn=function(e){var t=e.usdSize,n=e.symbol,i=e.entryPrice,r=e.priceLabel||"Entry Price";return(0,V.jsxs)("div",{className:Gn,children:[(0,V.jsxs)("div",{className:Yn,children:["Size(",n,")"]}),(0,V.jsx)("div",{children:"Size(".concat(n,")= Size(USD) / ").concat(r)}),(0,V.jsx)("div",{children:"Size(USD): $".concat((0,G.Q6)(t).toFixed(6,1))}),(0,V.jsx)("div",{children:"".concat(r,": $").concat(i)}),(0,V.jsx)("div",{className:Kn,children:(0,V.jsx)(Ee._H,{id:"Trading units using stable coins in DEI such as USD, open position amounts shown are calculated based on the actual coin quantity. Values change with the last price of the symbol."})})]})},$n=function(){return(0,V.jsxs)("div",{className:Gn,children:[(0,V.jsx)("div",{className:Yn,children:"Size(USD)"}),(0,V.jsx)("div",{className:Kn,children:(0,V.jsx)(Ee._H,{id:"Trading units using stable coins in DEI such as USD, open position amounts shown are calculated based on the actual coin quantity. Values change with the last price of the symbol."})})]})},ei=function(e){var t=e.usdSize,n=e.priceLabel,i=e.entryPrice,r=e.symbol;return(0,c.sJ)(Ue)?(0,V.jsx)(Jn.Z,{overlayStyle:{minWidth:320},overlay:(0,V.jsx)(Xn,{priceLabel:n,symbol:r,usdSize:t,entryPrice:i}),children:(0,V.jsx)("div",{className:Wn,children:"".concat((0,G.dp)(Me.getCoinBasedSizeByUSD((0,G.Q6)(t),(0,G.Q6)(i)),2).display({suffix:" ".concat(r),prefix:""}))})}):(0,V.jsx)(Jn.Z,{overlayStyle:{minWidth:320},overlay:(0,V.jsx)($n,{}),children:(0,V.jsxs)("div",{className:Wn,children:[" $",(0,G.Q6)(t).toFixed(6,1)]})})},ti="buttons___aWMiP",ni="overlay___b12N7",ii=function(e){var t=e.svgName,i=void 0===t?"edit":t,r=e.children,a=e.toolTipContent,l=e.overlayClass,s=void 0===l?ni:l,o=e.append,c=void 0===o?"svg":o,u=e.imgClass;return(0,V.jsx)("div",f()(f()({},e),{},{children:(0,V.jsx)(fn.Z,{placement:"top",overlay:(0,V.jsx)("div",{className:s,children:(0,V.jsx)("span",{children:a})}),children:(0,V.jsxs)("span",{children:[i?(0,V.jsx)("img",{src:n(77912)("./".concat(i,".").concat(c)),className:u}):r," "]})})}))},ri=function(e){var t,n=e.buttons;return(0,V.jsx)("div",{className:ti,children:null==n||null===(t=n.filter((function(e){return e.visible})))||void 0===t?void 0:t.map((function(e){return(0,V.jsx)(ii,f()({},e),e.id)}))})},ai=(0,ne.tq)()?function(e){var t=e.orders,n=e.handleEdit,i=e.handleCancel;return(0,V.jsx)("div",{className:Vn.container,children:t.map((function(e,t){var r,a;return(0,V.jsxs)("div",{className:Vn.orderListItem,children:[(0,V.jsxs)("div",{className:Vn.pair,children:[(0,V.jsxs)("div",{className:Vn.pairLeft,children:[(0,V.jsxs)("div",{children:[" ",e.pair," "]}),(0,V.jsx)("div",{className:P()(Vn.pos,(r={},v()(r,Vn.long,e.isLong),v()(r,Vn.short,!e.isLong),r)),children:e.isLong?"Long":"Short"})]}),(0,V.jsx)("div",{className:Vn.limit,children:(0,V.jsx)(Ee._H,{id:"Limit"})})]}),[{title:function(){return(0,V.jsx)(Ee._H,{id:"Size"})},value:(0,V.jsx)(ei,{priceLabel:"Order Price",entryPrice:e.triggerPrice,symbol:(0,ne.D4)(e.pair),usdSize:e.size})},{title:function(){return(0,V.jsx)(Ee._H,{id:"Collateral"})},value:+e.isIncrease?(0,G.dp)(e.collateral,2).display():(0,G.dp)(null===(a=Math.abs(+e.collateral))||void 0===a?void 0:a.toString()).display({prefix:"-$"})},{title:function(){return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Ee._H,{id:"Order"})," ",(0,V.jsx)(Ee._H,{id:"Price"})]})},value:(0,G.dp)(null==e?void 0:e.triggerPrice).display({prefix:null!=e&&e.triggerAbove?">$":"<$"})},{title:function(){return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Ee._H,{id:"Index"})," ",(0,V.jsx)(Ee._H,{id:"Price"})]})},value:(0,G.dp)(e.indexPrice).display()},{title:function(){return"TP/SL"},value:(+(null==e?void 0:e.tp)>0?(0,G.dp)(null==e?void 0:e.tp).display():"-")+"/"+(+(null==e?void 0:e.sl)>0?(0,G.dp)(null==e?void 0:e.sl).display():"-")},{title:function(){return(0,V.jsx)(Ee._H,{id:"Time"})},dataIndex:"time",value:e.time}].map((function(e,t){return(0,V.jsxs)("div",{className:Vn.orderListItemContent,children:[(0,V.jsx)("span",{className:Vn.label,children:e.title()}),(0,V.jsx)("span",{className:Vn.text,children:e.value})]})})),(0,V.jsxs)("div",{className:Vn.btnsH5,children:[(0,V.jsx)("div",{className:Vn.btnH5,onClick:function(){return n(e,t)},children:(0,V.jsx)(Ee._H,{id:"Edit"})}),(0,V.jsx)("div",{className:Vn.btnH5,onClick:function(){return i(e)},children:(0,V.jsx)(Ee._H,{id:"Cancel"})})]})]})}))})}:function(e){var t=e.orders,n=e.handleCancel,i=e.handleEdit,r=e.handleCancelAll,a=[{width:"8%",title:"Pair",dataIndex:"pair",render:function(e){return e||"-"}},{width:"8%",title:"Side",key:"side",render:function(e){var t;return(0,V.jsx)("div",{className:P()((t={},v()(t,Vn.colorGrn,(null==e?void 0:e.isLong)==(null==e?void 0:e.isIncrease)),v()(t,Vn.colorRed,(null==e?void 0:e.isLong)!==(null==e?void 0:e.isIncrease)),t)),children:null==e?void 0:e.side})}},{width:"8%",title:"Type",dataIndex:"type",key:"type"},{width:"15%",title:"Size",dataIndex:"size",key:"size",render:function(e,t){var n=(0,ne.D4)(t.pair);return(0,V.jsx)(ei,{priceLabel:"Order Price",entryPrice:t.triggerPrice,symbol:n,usdSize:e})}},{width:"8%",title:"Collateral",key:"collateral",render:function(e){var t;return+e.isIncrease?(0,G.dp)(e.collateral).display({prefix:"+$"}):(0,G.dp)(null===(t=Math.abs(+e.collateral))||void 0===t?void 0:t.toString()).display({prefix:"-$"})}},{width:"8%",title:"Order Price",render:function(e){return(0,G.dp)(null==e?void 0:e.triggerPrice).display({prefix:null!=e&&e.triggerAbove?">$":"<$"})}},{width:"8%",title:"Index Price",render:function(e){return(0,G.dp)(e.indexPrice).display()}},{width:"10%",title:"TP/SL",render:function(e){return(+(null==e?void 0:e.tp)>0?(0,G.dp)(null==e?void 0:e.tp).display():"-")+"/"+(+(null==e?void 0:e.sl)>0?(0,G.dp)(null==e?void 0:e.sl).display():"-")}},{width:"10%",title:"Time",dataIndex:"time",key:"time"},{width:"15%",title:null!=t&&t.length?(0,V.jsx)("span",{onClick:r,children:"Cancel All"}):(0,V.jsx)(V.Fragment,{}),render:function(e,t,r){var a,l,s=function(){return(0,V.jsxs)("div",{className:Vn.warning,children:[(0,V.jsx)("div",{children:"Take Profit / Stop loss"}),(0,V.jsx)("div",{className:Vn.warningContent})]})},o=[{svgName:"mainorder",toolTipContent:s(),visible:!1},{svgName:"suborder",toolTipContent:s(),visbile:!1},{svgName:"warningYellow",toolTipContent:(l=null===(a={visible:!1,type:0})||void 0===a?void 0:a.type,(0,V.jsxs)("div",{className:Vn.warning,children:[(0,V.jsx)("div",{children:"WARNING"}),(0,V.jsx)("div",{className:Vn.warningContent,children:{0:"No open position, order cannot be executed unless a position is opened.",1:"Order size is bigger than position, will only be executable if position.",2:"The trigger order has reached the upper limit, and the stop loss / take profit order may not be created.",3:"Stop Loss / Take Profit Below / Above Liq. Price, and the stop loss / take profit order may not be created."}[l]})]})),visbile:!1},{svgName:"edit",toolTipContent:"Edit",onClick:function(){return i(e,r)},visible:!0},{svgName:"close",toolTipContent:"Cancel",onClick:function(){return n(e)},visible:!0}];return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(ri,{buttons:o})})}}];return(0,V.jsx)(Ot.ZP,{emptyText:"",className:Vn.table,data:t,columns:a})},li=function(e){var t=e.tradeShowArgs,n=e.successCb,i=(0,c.sJ)(We),r=(0,o.useState)(!1),a=l()(r,2),s=a[0],u=a[1],d=(0,o.useState)({}),p=l()(d,2),v=p[0],m=p[1],f=(0,o.useState)(void 0),y=l()(f,2),g=y[0],x=y[1],h=(0,o.useState)(1),_=l()(h,2),b=_[0],j=_[1],P=(0,o.useMemo)((function(){var e=b*nt,t=e-nt;return i.slice(t,e)}),[b,i]);return(0,o.useEffect)((function(){void 0!==g&&P[g]&&m(P[g])}),[P]),(0,V.jsxs)(V.Fragment,{children:[s&&v&&(0,V.jsx)(qn,{isVisible:s,setIsVisible:u,tradeShowArgs:t,row:v,successCb:n}),(0,V.jsxs)("div",{className:Vn.card,children:[(0,V.jsx)(ai,{orders:P,handleCancel:function(e){var i,r,a,l;(i=t,r=e.isIncrease,a=null==e?void 0:e.orderID,l=null==e?void 0:e.isLong,i.market.cancelOrder(r,Number(a),l)).then((function(e){n(),u(!1)})).catch((function(e){return console.log("handleCancel err",e)})).finally((function(){}))},handleEdit:function(e,t){x(t),m(e),u(!0)},handleCancelAll:function(){(function(e,t){var n=[],i=[],r=[];return null==t||t.forEach((function(e){n.push(e.isIncrease),i.push(Number(e.orderID)),r.push(e.isLong)})),e.market.cancelOrderList(n,i,r)})(t,P).then((function(e){n()})).catch((function(e){return console.log("cancel All",e)}))}}),!(null!=P&&P.length)&&(0,V.jsx)(mt,{text:"No open orders"}),(null==P?void 0:P.length)&&(0,V.jsx)(at,{data:P,pageIndex:b,setPageIndex:j,_data:i})]})]})},si="orderPanel___weQ4q",oi="tabList___iDvkP",ci="tabItem___UJec7",ui="selected___lGODG",di="header___Y18Vk",pi="right___ExK0Y",vi="switch___yJrUb",mi="overlay___LURQM",fi="collateral___I5qZP",yi="collateralTxt___sEChq",gi="card___XRXfM",xi=function(){var e=b()(h()().mark((function e(t,n){var i,r,a;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={isLimit:n.isLimit,sizeDelta:(0,we._b)(0),price:(0,we._b)(0),slippage:(0,we._b)(0),isLong:n.isLong,isExec:!1,account:t.accountAddress,isKeepLev:n.keepLeverage},r=t.market,i.sizeDelta=r.getNumDecimals(n.sizeDelta),i.price=r.getPriceDecimals(n.price),i.slippage=r.getSlippageDecimals(r.formatPercentage(t.slippage)),e.next=7,r.decreaseTrade(i);case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),hi=n(81856),_i="overlay___RTa3F",bi="title___p13nO",ji="label___LLPov",Pi="questionIcon___Xi1Af",Ni="field___HXc4S",wi="value___jgnpM",Li=function(e){var t=e.fundingFee,n=e.positionFee,i=e.isLimit,r=e.executionFee,a=e.fees;return(0,V.jsx)("div",{children:(0,V.jsxs)("div",{className:Ni,style:{height:"18px"},children:[(0,V.jsxs)("div",{className:ji,children:["Fees",(0,V.jsx)(fn.Z,{placement:"bottom",overlay:(0,V.jsxs)("div",{className:_i,children:[(0,V.jsx)("div",{className:ji,children:(0,V.jsx)("span",{className:bi,children:"Fees"})}),n&&(0,V.jsx)("div",{className:ji,children:"".concat(i?"Open":"Close"," Fee: ").concat((0,ae.xP)(n,2,"$"))}),t&&(0,V.jsx)("div",{className:ji,children:"Funding Fee: ".concat((0,ae.xP)(t,2,"$"))}),r&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{className:ji,children:"Execution Fee: ".concat((0,ae.xP)(i?r:"0",2,"$"))}),(0,V.jsx)("div",{className:ji,children:"The execution fee is only charged when the order is executed or canceled due to invalid execution."})]})]}),children:(0,V.jsx)("div",{className:Pi,children:(0,V.jsx)(hi.r,{})})})]}),(0,V.jsx)("div",{className:wi,children:(0,ae.xP)(a,2,"$")})]})})},Ti="header___cnc5K",Ci="submitBtn___GOq9M",ki="tabList___Ynh2Z",Si="tabItem___mxzqS",Fi="selected___hpXfr",Ii="fields___jqoiL",Mi="field___gznn3",Oi="dField___smjTW",Di="label___d6Gje",Ai="value___VUuPy",Ei="modal___yrezj",zi="tabs___bazyO",Ri="cut___xmhqm",Qi="receive___P7iU3",Bi=function(){return(0,V.jsx)("div",{className:Ri})},Hi=function(e){var t,n=e.isVisible,i=e.setIsVisible,r=e.row,a=void 0===r?{}:r,u=e.tradeShowArgs,d=e.successCb,p=a.size,m=void 0===p?"2000.999999":p,y=a.initialCollateral,g=void 0===y?"200,000000000001":y,x=a.leverage,h=void 0===x?"10.000001":x,_=a.fundingFee,b=void 0===_?"20":_,j=a.liqPrice,N=void 0===j?"0.00000001":j,w=a.indexPrice,L=(0,o.useState)(0),T=l()(L,2),C=T[0],k=T[1],S=(0,o.useState)(""),F=l()(S,2),I=F[0],M=F[1],O=(0,o.useState)(w),D=l()(O,2),A=D[0],E=D[1],z=(0,o.useState)(!0),R=l()(z,2),Q=R[0],B=R[1],H=(0,s.Ge)(),Z=H.active,U=H.account,q=(0,o.useState)(!1),J=l()(q,2),Y=J[0],K=J[1],W=(0,o.useState)("0.3"),X=l()(W,2),$=X[0],ee=X[1],te=null!==(t=+(null==u?void 0:u.cleanFee))&&void 0!==t?t:"5.0",ie=(0,c.sJ)(Ue),re=Me.getCoinBasedSizeByUSD((0,G.Q6)(m),(0,G.Q6)(null==a?void 0:a.averagePrice)),le=ie?re.toFixed(4,1):(0,G.Q6)(m).toFixed(u.ctokenDecimals,1);function se(){return ie?!!(0,G.Q6)(I).minus(le).gte(0):+I==+a.size}var oe=(0,o.useMemo)((function(){return(0,ne.D4)(a.pair)}),[null==a?void 0:a.pair]),ce=(0,o.useMemo)((function(){return ie&&a&&null!=u&&u.market?se()?(0,G.Q6)(m).toFixed(u.ctokenDecimals,1):(0,G.Q6)(I||0).multipliedBy((0,G.Q6)(a.averagePrice)).toFixed(u.ctokenDecimals,1):I}),[I,re,a,ie,le,a.size,null==a?void 0:a.averagePrice,null==u?void 0:u.market]),ue=(0,o.useMemo)((function(){return a?ie?"".concat(le," ").concat(oe):"$".concat(le):"-"}),[ie,le,oe]);var de=(0,o.useMemo)((function(){var e=0!==C,t=se(),n=function(e,t,n,i,r,a,l){var s,o,c,u=t.initialCollateral,d=void 0===u?"200":u,p=t.executionFee,v=void 0===p?"0.09":p,m=t.fundingFee,y=void 0===m?"10":m,g=t.feeRate,x=t.size,h=void 0===x?"2000":x,_=new $t.O(d),b=new $t.O(i||0),j=new $t.O(h),P=j.minus(b).isGreaterThan(0)?j.minus(b):new $t.O(0),N=j.minus(b).isGreaterThan(0),w=null==b?void 0:b.gt(0),L=new $t.O(g),T=a?new $t.O(v):0,C=new $t.O(y),k=b.dividedBy(j),S=null==e?void 0:e.fundFeeRate,F=+i>0?b.multipliedBy(L):j.multipliedBy(L),I=C.plus(T).plus(F),M=new $t.O(Ze(f()(f()({},t),{},{indexPrice:n,size:b.toString()}),null==e?void 0:e.openFeeRate,S)),O=w?l?_.plus(M).minus(I):r?_.multipliedBy(k).plus(M).minus(I):M.minus(I):new $t.O(0),D=l?new $t.O(0):r?N?new $t.O(1).minus(k).multipliedBy(_):new $t.O(0):_;O.lte(0)&&(D=D.plus(O));var A=M.toString(),E=P.toString(),z=N?P.dividedBy(D).toString():"0.01",R=(0,G.Q6)((null==e||null===(s=e.market)||void 0===s||null===(o=s._valid)||void 0===o||null===(c=o.maxLev)||void 0===c?void 0:c.toNumber())||100),Q=(0,G.Q6)(null==e?void 0:e.openFeeRate),B=(0,G.Q6)(null==e?void 0:e.cleanFee),H=He(f()(f()({},t),{},{fundingFee:"0",size:P.toString(),collateral:D.toString()}),null==t?void 0:t.feeRate,R,Q,B),Z=new $t.O(+Ze(f()(f()({},t),{},{indexPrice:n,size:null==P?void 0:P.toString()}),null==e?void 0:e.openFeeRate,S)),V=P.multipliedBy(L),U=D.plus(Z).minus(V).toString(),q=M.dividedBy(_).multipliedBy(100);return{nextSize:E,nextLeverage:z,nextLiqPrice:null==H?void 0:H.toString(),nextCollateral:D.toString(),receive:O.toString(),nextPNL:A,nextPNLRate:q.toString(),fees:I.toString(),positionFee:F.toString(),nextNetValue:U.toString(),ifAll:l}}(u,a,w,ce,Q,e,t),i=e?null==u?void 0:u.executionFee:"0";return f()(f()({isLimit:e},n),{},{executionFee:i})}),[ce,le,C,Q,A,w,m]),pe=de.nextSize,ve=de.nextCollateral,me=de.nextLeverage,fe=de.nextLiqPrice,ye=de.isLimit,ge=de.receive,xe=de.nextPNL,he=de.fees,_e=de.positionFee,be=de.nextNetValue,je=de.nextPNLRate,Pe=de.ifAll,Ne=de.executionFee,we=function(){var e=function(){if(!A&&C)return"Enter A Price";if(C){var e=Pe?N:fe;if(null!=a&&a.isLong&&+A<+e)return"Price Below Liq. Price";if((null==a||!a.isLong)&&+A>+e)return"Price Above Liq. Price"}if(!+I)return"Enter an amount";if(!Pe){if(+ce>+m)return"Max close amount exceeded";if(+me<2)return" Min Leverage: 2.00x";if(+me>100)return"Max Leverage: 100.00x";if(+ve<te)return"Leftover Collateral Size below ".concat(te," USD");if(+be<te)return"Leftover Net Value Size below ".concat(te," USD")}return Y?C?"Creating Order...":"Closing...":""}();return e?{btnTxt:e,btnValid:!1}:{btnTxt:C?"Create Order":"Close",btnValid:!0}},Le=(0,o.useMemo)((function(){return+I>+(null==a?void 0:a.size)?{btnTxt:"Max close amount exceeded",btnValid:!1}:we()}),[m,A,ce,I,Y,Q,be,ve,me,C,N,fe]),Te=Le.btnTxt,Ce=Le.btnValid,ke=(0,o.useMemo)((function(){return ie&&a?Me.getCoinBasedSizeByUSD((0,G.Q6)(pe),(0,G.Q6)(null==a?void 0:a.averagePrice)).toFixed(4,1):(0,G.Q6)(pe).toFixed(u.ctokenDecimals,1)}),[ie,pe,null==a?void 0:a.averagePrice,u.ctokenDecimals,I]);return(0,V.jsx)("div",{className:Ei,children:(0,V.jsxs)(en.Z,{title:"Close ".concat(null!=a&&a.isLong?"Long":"Short"," ETH"),onClose:function(){return i(!1)},visible:n,width:512,children:[(0,V.jsx)("div",{className:zi,children:(0,V.jsx)(Ae.O.Group,{defaultIndex:C,onChange:function(e){M(""),E(""),k(e)},children:(0,V.jsx)("div",{className:Ti,children:(0,V.jsxs)(Ae.O.List,{className:ki,children:[(0,V.jsx)(Ae.O,{className:function(e){var t=e.selected;return P()(Si,v()({},Fi,t))},children:"Market"}),(0,V.jsx)(Ae.O,{className:function(e){var t=e.selected;return P()(Si,v()({},Fi,t))},children:"Trigger"})]})})})}),(0,V.jsx)(tn.tV,{value:ye?A:w,disabled:!ye,onChange:E,decimals:2}),(0,V.jsxs)("div",{className:Oi,children:[(0,V.jsxs)("div",{className:Mi,children:[(0,V.jsxs)("div",{className:Di,children:["Index Price:",(0,V.jsx)("span",{children:""})]}),(0,V.jsx)("div",{className:Ai,children:w})]}),(0,V.jsxs)("div",{className:Mi,children:[(0,V.jsxs)("div",{className:Di,children:["Available:",(0,V.jsx)("span",{children:""})]}),(0,V.jsx)("div",{className:Ai,children:ue})]})]}),(0,V.jsx)(tn.gp,{label:"Close",symbol:ie?oe:"USDC",onClickMaxBtn:function(){a.size&&!(0,G.Q6)(a.size).eq(0)?M(le):M("0")},value:I,onChange:function(e){M(e)}}),!ye&&(0,V.jsx)(kn,{value:{slippage:$},ifSlippage:!0,onChange:function(e){ee((null==e?void 0:e.slippage)||"")}}),(0,V.jsxs)("div",{className:Ii,children:[Zn("Position Size",le,ke,ie?"":"$",ie?" ".concat((0,ne.D4)(a.pair)):"",{formatNextValue:function(e){return e}}),Zn("Collateral",g,0==+I?g:ve,"$"),Zn("Leverage",h,0==+I?h:me,"","x",{defaultValue:"0.01"===me?"-":""}),(0,V.jsxs)("div",{className:Mi,children:[(0,V.jsx)("div",{className:Di,children:"PNL"}),(0,V.jsx)("div",{className:Ai,children:+I>0?gt(xe,je):gt(null==a?void 0:a.PNL,null==a?void 0:a.PNLRate)})]}),(0,V.jsx)(Li,{fundingFee:b,positionFee:_e,executionFee:Ne,isLimit:ye,fees:he}),(0,V.jsxs)("div",{className:Mi,children:[(0,V.jsx)("div",{className:Di,children:"Keep Leverage"}),(0,V.jsx)("div",{className:Ai,children:(0,V.jsx)(Xt,{checked:Q,onChange:B})})]}),(0,V.jsx)(Bi,{}),(0,V.jsxs)("div",{className:Mi,children:[(0,V.jsx)("div",{className:Di,children:"Entry Price"}),(0,V.jsx)("div",{className:Ai,children:(0,ae.xP)(null==a?void 0:a.averagePrice,2,"$")})]}),Pe?Zn("Liq. Price","0",void 0,"$"):Zn("Liq. Price",N,isFinite(+fe)?+I>0?fe:N:"0.000001","$")]}),(0,V.jsx)(Bi,{}),(0,V.jsxs)("div",{className:Ii,children:[Zn("Spread","0",void 0,"","%"),Zn("Slippage",$||"0.3","","","%"),(0,V.jsx)("div",{className:Qi,children:Zn("Receive",+ge>0?ge:"0",void 0,void 0," USDC")})]}),(0,V.jsx)(tt.Z,{className:Ci,size:"large",disabled:Y||!Ce,onClick:function(){Z&&U&&(K(!0),xi(u,{keepLeverage:Q,slippage:$,sizeDelta:se()?a.size:ie?(0,G.Q6)(I).multipliedBy(null==a?void 0:a.averagePrice).toString():I,price:A,isLong:null==a?void 0:a.isLong,isLimit:ye,nextSize:pe,nextPNL:xe}).then((function(e){i(!1),d()})).catch((function(e){return console.log("confirm",e)})).finally((function(){K(!1)})))},children:Te})]})})},Zi=1e5,Vi=function(e){var t=e.isVisible,n=e.setIsVisible,i=e.row,r=void 0===i?{}:i,a=e.market,c=e.tradeShowArgs,u=e.successCb,d=r.collateral,p=void 0===d?"200":d,m=r.leverage,y=void 0===m?"10":m,g=r.fundingFee,x=void 0===g?"20":g,h=r.liqPrice,_=void 0===h?"0.001":h,b=r.isLong,j=r.indexPrice,N=(0,o.useState)(0),w=l()(N,2),L=w[0],T=w[1],C=(0,o.useState)(""),k=l()(C,2),S=k[0],F=k[1],I=(0,s.Ge)(),M=I.active,O=I.account,D=(0,o.useState)(!1),A=l()(D,2),E=A[0],z=A[1],R="Deposit",Q=(0,o.useMemo)((function(){return 0===L}),[L]),B=(0,o.useMemo)((function(){return function(e,t,n,i,r,a){e.collateral;var l,s,o,c=e.size,u=e.fundingFee,d=e.initialCollateral,p=new $t.O(u),v=new $t.O(n),m=n?function(e){var n,i,r,a=t?"plus":"minus";return null===(n=new $t.O(d))||void 0===n||null===(i=n[a])||void 0===i||null===(r=i.call(n,new $t.O(e)).minus(p))||void 0===r?void 0:r.toString()}(n):null==e?void 0:e.collateral,y=n?new $t.O(null==e?void 0:e.size).dividedBy(new $t.O(m)).toString():null==e?void 0:e.leverage,g=n?"0":u,x=new $t.O(c),h=(0,G.Q6)(null==a||null===(l=a.market)||void 0===l||null===(s=l._valid)||void 0===s?void 0:s.maxLev.toNumber()),_=(0,G.Q6)(null==a?void 0:a.cleanFee),b=(0,G.Q6)(null==a?void 0:a.openFeeRate),j=n&&He(f()(f()({},e),{},{collateral:null===(o=new $t.O(m).plus(p))||void 0===o?void 0:o.toString()}),null==e?void 0:e.feeRate,h,b,_)||"",P=new $t.O(d).minus(u).minus(x.dividedBy(100).isLessThan(10)?10:x.dividedBy(100));return{nextCollateral:m,nextLeverage:y,nextFund:g,nextLiqPrice:j,nextAvlb:t?i:P.isGreaterThan(0)?P.toString():"0",delta:(t?v:p.gte(0)?v.plus(p):v).toString()}}(r,Q,S,null==c?void 0:c.avlb,0,c)}),[S,L,j,Q]),H=B.nextCollateral,Z=B.nextLeverage,U=B.nextLiqPrice,q=B.nextAvlb,J=B.delta,Y=function(){var e=function(){if(!+S)return"Enter an amount";if(!Q){if(b&&+U>+j)return"Invalid Liq.Price";if(!b&&+U<+j)return"Invalid Liq.Price"}return!L&&+S>+q?"Insufficient USDC Balance":L&&+H<10?"Min residual collateral: 10 USD":+Z<2?" Min Leverage: 2.00x":+Z>100?"Max Leverage: 100.00x":E?L?"Withdrawing...":"Depositing...":""}();return e?{btnTxt:e,btnValid:!1}:{btnTxt:L?"Withdraw":"Deposit",btnValid:!0}},K=(0,o.useMemo)((function(){return Y()}),[L,S,E,Q,b,j,U,q,H,Z]),W=K.btnTxt,X=K.btnValid;return(0,V.jsx)("div",{className:Ei,children:(0,V.jsxs)(en.Z,{title:"Edit Collateral",onClose:function(){return n(!1)},visible:t,width:512,children:[(0,V.jsx)("div",{className:zi,children:(0,V.jsx)(Ae.O.Group,{defaultIndex:L,onChange:function(e){F(""),T(e)},children:(0,V.jsx)("div",{className:Ti,children:(0,V.jsxs)(Ae.O.List,{className:ki,children:[(0,V.jsx)(Ae.O,{className:function(e){var t=e.selected;return P()(Si,v()({},Fi,t))},children:R}),(0,V.jsx)(Ae.O,{className:function(e){var t=e.selected;return P()(Si,v()({},Fi,t))},children:"Withdraw"})]})})})}),(0,V.jsx)(tn.gp,{onClickMaxBtn:function(){F(q)},value:S,onChange:function(e){F(e)},label:Q?"Pay":"Receive"}),(0,V.jsxs)("div",{className:Ii,children:[(0,V.jsxs)("div",{className:Mi,children:[(0,V.jsxs)("div",{className:Mi,children:[(0,V.jsxs)("div",{className:Di,children:[(Q?R:"Withdraw")+": ",(0,V.jsx)("span",{children:""})]}),(0,V.jsx)("div",{className:Ai,children:(0,ae.xP)(""===S?"0":S,void 0,"$")})]}),(0,V.jsxs)("div",{className:Mi,children:[(0,V.jsxs)("div",{className:Di,children:[Q?"Balance: ":"Available: ",(0,V.jsx)("span",{children:""})]}),(0,V.jsx)("div",{className:Ai,children:(0,ae.xP)(q,Q?4:2,void 0,Q?" USDC":"$")})]})]}),Zn("Collateral",p,H,"$"),Zn("Leverage",y,Z,"","X"),(0,V.jsxs)("div",{className:Mi,children:[(0,V.jsx)("div",{className:Di,children:"Index Price"}),(0,V.jsx)("div",{className:Ai,children:(0,ae.xP)(j,void 0,"$")||"-"})]}),Zn("Liq. Price",_,U,"$"),(0,V.jsx)(Li,{fundingFee:x,fees:x})]}),(0,V.jsx)(tt.Z,{className:Ci,disabled:E||!X,size:"large",onClick:function(){M&&O&&(z(!0),function(e,t,n,i){if(n){var r=n.getNumDecimals(t);return i?n.increaseCollateral(r,e):(console.log("---decreaseCollateral----amount-isLong-isDeposit-bigAmount",t,e,i,r.toString()),n.decreaseCollateral(r,e))}return Promise.resolve("confirmEditCollateral failed")}(null==r?void 0:r.isLong,J,a,Q).then((function(e){console.log("collateral succussed",e),u(),n(!1)})).catch((function(e){return console.log("confirm",e)})).finally((function(){z(!1)})))},children:W})]})})},Ui="table___XB6MA",qi="position___Dwf6N",Ji="postionHlgt___apngF",Gi="pos___wBIvY",Yi="long___fCOYz",Ki="short___miFCO",Wi="positionList___o82d0",Xi="containerH5___XiJLb",$i="positionLeft___JDFdk",er="field___eLfxe",tr="label___lrAei",nr="text___y9DiE",ir="pnlText___RcCTf",rr="btnsH5___PgCSD",ar="btnH5___mI2KK",lr="warning___mid7Z",sr="warningContent___rHgLN",or="loading___bfhIM",cr="color100___ZmByU",ur=function(e,t,n){e!==t&&n(e)},dr=n(51608),pr=n(13341),vr=function(e){var t=e.row,n=e.handleEditCollateral;return(0,V.jsx)("div",{children:(0,V.jsxs)("div",{className:fi,children:[(0,V.jsx)(Jn.Z,{placement:"bottom",overlay:(0,V.jsxs)("div",{className:mi,children:["Collateral",(0,V.jsx)("br",{}),"Collateral:  Initial Collateral - Funding Fee",(0,V.jsx)("br",{}),"Initial Collateral: ".concat(+(null==t?void 0:t.initialCollateral)<0?(0,G.dp)(Math.abs(+(null==t?void 0:t.initialCollateral)).toString()).display({prefix:"-$"}):(0,G.dp)(Math.abs(+(null==t?void 0:t.initialCollateral)).toString()).display({prefix:"+$"})),(0,V.jsx)("br",{}),"Funding Fee: ".concat((0,ae.xP)(null==t?void 0:t.fundingFee,void 0,"$")),(0,V.jsx)("br",{}),"Funding Fee / Day: ".concat((0,ae.xP)(null==t?void 0:t.fundFeeDay,void 0,"$")),(0,V.jsx)("br",{}),"Use the Edit Collateral icon to deposit or withdraw collateral."]}),children:(0,V.jsx)(dr.Z.Text,{className:yi,children:(0,ae.xP)(t.collateral,void 0,"$")})}),(0,V.jsx)(pr.$iz,{style:{cursor:"pointer"},size:"16",onClick:function(){return n()}})]})})},mr=function(e){var t=e.openCloseFee,n=e.PNLAfterFees,i=e.pnlAfterFeesRate;return(0,V.jsxs)("div",{className:fi,children:[(0,V.jsx)(Jn.Z,{placement:"bottom",overlay:(0,V.jsxs)("div",{className:mi,children:["Net Value",(0,V.jsx)("br",{}),"Net Value: Initial Collateral + PnL - Funding Fee - Close Fee",(0,V.jsx)("br",{}),"Initial Collateral: ".concat((null==e||e.initialCollateral,(0,ae.xP)(Math.abs(+(null==e?void 0:e.initialCollateral)).toString(),void 0,"$"))),(0,V.jsx)("br",{}),"PnL: ".concat(+(null==e?void 0:e.PNL)>0?(0,ae.xP)(Math.abs(+(null==e?void 0:e.PNL)).toString(),void 0,"+$"):(0,ae.xP)(Math.abs(+(null==e?void 0:e.PNL)).toString(),void 0,"-$")),(0,V.jsx)("br",{}),"Funding Fee: ".concat((0,ae.xP)(null==e?void 0:e.fundingFee,void 0,"$")),(0,V.jsx)("br",{}),"Open Fee: ".concat((0,ae.xP)(null==t?void 0:t.toString(),void 0,"$")),(0,V.jsx)("br",{}),"Close Fee: ".concat((0,ae.xP)(null==t?void 0:t.toString(),void 0,"$")),(0,V.jsx)("br",{}),"PnL After Fees:",gt(null==n?void 0:n.toString(),null==i?void 0:i.toString(),!1)]}),children:(0,V.jsx)("div",{className:yi,children:(0,ae.xP)(null==e?void 0:e.netValue,void 0,"$")})}),(0,V.jsx)("span",{children:gt(null==e?void 0:e.PNL,null==e?void 0:e.PNLRate)})]})},fr=n(38147),yr="content___VzqrF",gr="coin___lxZ8a",xr="operationContainer___pVVjp",hr="longColor___i6mFX",_r="shortColor___kUd2O",br="leverageText___M5MFB",jr="pnlContainer___qPyrN",Pr="pnl___m2VoU",Nr="pnlValue___QYeuB",wr="prices___kiXby",Lr="priceContainer___BYY83",Tr="priceTitle___MzCfX",Cr="priceValue____kzul",kr=function(e){var t=e.row,n=e.children,i=t.isLong,r=t.pair,a=t.leverage,l=t.PNLRate,s=t.averagePrice,o=t.indexPrice;return(0,V.jsx)(fr.T,{title:"Share Position",downloadName:"Dei.io_share",coin:r,content:(0,V.jsx)(fr.v,{startTimestamp:Date.now(),children:(0,V.jsxs)("div",{className:yr,children:[(0,V.jsxs)("span",{className:gr,children:[r," Perpetual"]}),(0,V.jsxs)("div",{className:xr,children:[(0,V.jsx)("span",{className:i?hr:_r,children:i?"LONG":"SHORT"}),(0,V.jsxs)("span",{className:br,children:[a,"x"]})]}),(0,V.jsxs)("div",{className:jr,children:[(0,V.jsx)("span",{className:Pr,children:"PNL"}),(0,V.jsxs)("span",{className:"".concat(Nr," ").concat(Number(l)<0?_r:hr),children:[(0,ae.xP)(l,2,"+"),"%"]})]}),(0,V.jsx)("div",{className:wr,children:[{titleId:"Entry",price:s},{titleId:"Index",price:o}].map((function(e){return(0,V.jsxs)("div",{className:Lr,children:[(0,V.jsxs)("span",{className:Tr,children:[(0,V.jsx)(Ee._H,{id:e.titleId})," ",(0,V.jsx)(Ee._H,{id:"Price"})]}),(0,V.jsx)("span",{className:Cr,children:(t=e.price,t?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t):"$--")})]},e.titleId);var t}))})]})}),children:(0,V.jsx)("span",{children:n})})},Sr=Object.defineProperty,Fr=Object.getOwnPropertySymbols,Ir=Object.prototype.hasOwnProperty,Mr=Object.prototype.propertyIsEnumerable,Or=(e,t,n)=>t in e?Sr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Dr=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))Ir.call(t,n)&&Or(e,n,t[n]);if(Fr)for(var n of Fr(t))Mr.call(t,n)&&Or(e,n,t[n]);return e})({width:17,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{fill:"#1E1E1E",d:"M0 0h17v16H0z"}),o.createElement("path",{fill:"#060818",d:"M-287-2189h4040v5354H-287z"}),o.createElement("rect",{x:-167,y:-98,width:1400,height:404,rx:16,fill:"#151729"}),o.createElement("path",{fill:"#232538",d:"M-167-12h1400v40H-167z"}),o.createElement("path",{d:"m6.5 11 3-3-3-3",stroke:"#fff",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}));var Ar=Object.defineProperty,Er=Object.getOwnPropertySymbols,zr=Object.prototype.hasOwnProperty,Rr=Object.prototype.propertyIsEnumerable,Qr=(e,t,n)=>t in e?Ar(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Br=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))zr.call(t,n)&&Qr(e,n,t[n]);if(Er)for(var n of Er(t))Rr.call(t,n)&&Qr(e,n,t[n]);return e})({width:24,height:25,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.637 4.864a.9.9 0 0 0-1.273 0l-4 4a.9.9 0 0 0 1.273 1.272L11.1 7.673V15.5a.9.9 0 0 0 1.8 0V7.673l2.464 2.463a.9.9 0 0 0 1.273-1.272l-4-4ZM6.4 15.5a.9.9 0 1 0-1.8 0V19A1.4 1.4 0 0 0 6 20.4h12a1.4 1.4 0 0 0 1.4-1.4v-3.5a.9.9 0 1 0-1.8 0v3.1H6.4v-3.1Z",fill:"#fff"}));var Hr=(0,ne.tq)()?function(e){var t=e.data,n=e.handleClosePositon,i=e.handleEditCollateral,r=(0,c.FV)(d.bI),a=l()(r,2),s=a[0],o=a[1];return(0,V.jsx)("div",{className:Wi,children:t.map((function(e,t){var r;return(0,V.jsxs)("div",{className:Xi,children:[(0,V.jsxs)("div",{className:qi,onClick:function(){return ur(null==e?void 0:e.pair,(null==s?void 0:s.name)||"",o)},children:[(0,V.jsxs)("div",{className:$i,children:[(0,V.jsxs)("div",{children:[" ",e.pair," "]})," ",(0,V.jsxs)("div",{children:[Number(null==e?void 0:e.leverage).toFixed(2),"x"]})," ",(0,V.jsx)("div",{className:P()(Gi,(r={},v()(r,Yi,e.isLong),v()(r,Ki,!e.isLong),r)),children:e.isLong?"Long":"Short"})," "]}),(0,V.jsx)("span",{className:ir,children:gt(null==e?void 0:e.PNL,null==e?void 0:e.PNLRate)})]}),[{renderTitle:function(){return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Ee._H,{id:"Postion"})," ",(0,V.jsx)(Ee._H,{id:"Size"})]})},value:(0,V.jsx)(ei,{entryPrice:e.averagePrice,symbol:(0,ne.D4)(e.pair),usdSize:e.size})},{renderTitle:function(){return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Ee._H,{id:"Net"})," ",(0,V.jsx)(Ee._H,{id:"Value"})]})},value:(0,G.dp)(null==e?void 0:e.netValue).display()},{renderTitle:function(){return(0,V.jsx)(Ee._H,{id:"Collateral"})},value:(0,V.jsx)(vr,{row:e,handleEditCollateral:i})},{renderTitle:function(){return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Ee._H,{id:"Open"})," ",(0,V.jsx)(Ee._H,{id:"Price"})," / ",(0,V.jsx)(Ee._H,{id:"Mark"})," ",(0,V.jsx)(Ee._H,{id:"Price"})]})},value:"".concat((0,G.dp)(null==e?void 0:e.averagePrice).display()," / ").concat((0,G.dp)(null==e?void 0:e.indexPrice).display())},{renderTitle:function(){return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Ee._H,{id:"Liq"}),". ",(0,V.jsx)(Ee._H,{id:"Price"})]})},value:(0,G.dp)(e.liqPrice).display()}].map((function(e,t){return(0,V.jsxs)("div",{className:er,children:[(0,V.jsx)("span",{className:tr,children:e.renderTitle()}),(0,V.jsx)("span",{className:nr,children:e.value})]},t)})),(0,V.jsxs)("div",{className:rr,children:[(0,V.jsx)("div",{className:ar,onClick:function(){return n(e,t)},children:(0,V.jsx)(Ee._H,{id:"Close"})}),(0,V.jsxs)("div",{className:ar,onClick:function(){return i(e)},children:[(0,V.jsx)(Ee._H,{id:"Edit"})," ",(0,V.jsx)(Ee._H,{id:"Collateral"})]}),(0,V.jsx)("div",{className:ar,children:(0,V.jsx)(kr,{row:e,children:(0,V.jsx)(Ee._H,{id:"Share"})})})]})]},t)}))})}:function(e){var t=e.data,n=e.handleEditCollateral,i=e.handleClosePositon,r=(e.handleSelectMarket,(0,o.useState)(-1)),a=l()(r,2),s=a[0],u=a[1],p=(0,c.FV)(d.bI),m=l()(p,2),f=m[0],y=m[1],g=function(e){u(e)},x=[{title:"Position",width:"16%",render:function(e,t,n){var i,r;return(0,V.jsxs)("div",{className:P()((i={},v()(i,qi,s!==n),v()(i,Ji,s===n),i)),onClick:function(){return ur(null==e?void 0:e.pair,(null==f?void 0:f.name)||"",y)},onMouseOver:function(){return g(n)},onMouseLeave:function(){return g(-1)},children:[(0,V.jsx)("div",{children:e.pair}),(0,V.jsx)("div",{children:(0,G.dp)(null==e?void 0:e.leverage,2).display({suffix:"x",prefix:""})}),(0,V.jsx)("div",{className:P()(Gi,(r={},v()(r,Yi,e.isLong),v()(r,Ki,!e.isLong),r)),children:e.isLong?"Long":"Short"}),s===n&&(0,V.jsx)("span",{style:{float:"right"},children:(0,V.jsx)(Dr,{})})]})}},{title:"Size",dataIndex:"size",key:"size",width:"15%",render:function(e,t){if(t.category&&0==+t.category)return(0,V.jsx)("span",{className:cr,children:"Opening..."});var n=(0,ne.D4)(t.pair);return(0,V.jsx)(ei,{entryPrice:t.averagePrice,symbol:n,usdSize:e})}},{width:"10%",title:"Collateral",render:function(e,t,i){return(0,V.jsx)(vr,{row:e,handleEditCollateral:function(){return n(e,i)}})}},{width:"20%",title:"Net Value",render:mr},{width:"10%",title:"Entry Price",dataIndex:"averagePrice",key:"averagePrice",render:function(e){return(0,G.dp)(e,2).display()}},{width:"10%",title:"Index Price",render:function(e){return(0,G.dp)(e.indexPrice,2).display()}},{width:"10%",title:"Liq. Price",dataIndex:"liqPrice",render:function(e){return(0,G.dp)(e,2).display()}},{width:"15%",title:"",render:function(e,t,r){var a=[{svgName:"warningRed",toolTipContent:(0,V.jsxs)("div",{className:lr,children:[(0,V.jsx)("div",{children:"WARNING"}),(0,V.jsx)("div",{className:sr,children:"This position has a low amount of collateral after deducting borrowing fees, deposit more collateral to reduce the position's liquidation risk."})]}),visible:function(e){var t=(0,G.Q6)(null==e?void 0:e.initialCollateral).plus(null==e?void 0:e.fundingFee);return!!(null!=t&&t.lt(8)||(0,G.Q6)(null==e?void 0:e.size).dividedBy(t).gte(150))}(e)},{svgName:"",toolTipContent:"Share Position",children:(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(kr,{row:e,children:(0,V.jsx)(Br,{})})}),visible:!0},{svgName:"edit",toolTipContent:"Edit Collateral",onClick:function(){return n(e,r)},visible:!0},{svgName:"power",toolTipContent:"Close",onClick:function(){return i(e,r)},visible:!0}];return(0,V.jsxs)(V.Fragment,{children:[(null==e?void 0:e.category)&&0==+(null==e?void 0:e.category)&&(0,V.jsx)(ii,{append:"png",svgName:"loading",toolTipContent:"Opening...",imgClass:or}),(null==e?void 0:e.category)&&1==+(null==e?void 0:e.category)&&(0,V.jsx)(ii,{append:"png",svgName:"closing",toolTipContent:"Closing...",imgClass:or}),(null==e?void 0:e.size)&&(0,V.jsx)(ri,{buttons:a})]})}}];return(0,V.jsx)(Ot.ZP,{emptyText:"",className:Ui,columns:x,data:t})},Zr=function(e){var t=e.market,n=e.successCb,i=e.tradeShowArgs,r=(0,o.useState)(),a=l()(r,2),s=a[0],u=a[1],d=(0,o.useState)(),p=l()(d,2),v=p[0],m=p[1],f=(0,o.useState)(void 0),y=l()(f,2),g=y[0],x=y[1],h=(0,o.useState)(void 0),_=l()(h,2),b=_[0],j=_[1],P=(0,o.useState)(!1),N=l()(P,2),w=N[0],L=N[1],T=(0,o.useState)(!1),C=l()(T,2),k=C[0],S=C[1],F=(0,c.sJ)(Ke),I=(0,o.useState)(1),M=l()(I,2),O=M[0],D=M[1],A=(0,o.useMemo)((function(){var e=O*nt,t=e-nt;return F.slice(t,e)}),[O,F]);return(0,o.useEffect)((function(){void 0!==g&&A[g]&&u(A[g]),void 0!==b&&A[b]&&m(A[b])}),[A]),(0,V.jsxs)(V.Fragment,{children:[w&&v&&(0,V.jsx)(Vi,{isVisible:w,setIsVisible:L,row:v,market:t,tradeShowArgs:i,successCb:n}),k&&s&&(0,V.jsx)(Hi,{isVisible:k,setIsVisible:S,row:s,tradeShowArgs:i,successCb:n}),(0,V.jsxs)("div",{className:gi,children:[(0,V.jsx)(Hr,{data:A,handleClosePositon:function(e,t){S(!0),u(e),x(t)},handleEditCollateral:function(e,t){L(!0),m(e),j(t)}}),!(null!=A&&A.length)&&(0,V.jsx)(mt,{text:"No open positions"}),(null==A?void 0:A.length)&&(0,V.jsx)(at,{data:A,pageIndex:O,setPageIndex:D,_data:F})]})]})},Vr=n(39657),Ur=function(e,t){var n,i,r=null==t?void 0:t.map((function(e){return e.name})),a={};return r.forEach((function(t,n){var i,r;return a[t]="BigNumber"===(null==e||null===(i=e[n])||void 0===i?void 0:i.type)?(0,we.dN)(null==e||null===(r=e[n])||void 0===r?void 0:r.hex,18):null==e?void 0:e[n]})),Object.keys(a).forEach((function(e){Vr.O$.isBigNumber(a[e])&&"category"!==e&&(a[e]=(0,we.dN)(a[e],18))})),a.category=null==a||null===(n=a.category)||void 0===n?void 0:n.toString(),f()(f()({},a),{},{lastTime:null===(i=Date.now())||void 0===i?void 0:i.toString()})},qr=function(e){var t=(0,ee.x)().chainId,n=e.market,i=(e.infoTokens,e.tradeShowArgs),a=(e.showPnlAfterFees,(0,o.useState)(0)),s=l()(a,2),u=s[0],d=s[1],p=(0,c.FV)(Ye),m=l()(p,2),y=m[0],g=m[1],x=(0,c.FV)(Ge),h=l()(x,2)[1],_=Oe.I.useContainer(),b=_.tableFlag,j=_.setTableFlag,N=(0,c.FV)(qe),w=l()(N,2)[1],L=(0,c.sJ)(Ke),T=(0,c.FV)(Je),C=l()(T,2)[1],k=(0,c.sJ)($e),S=(0,c.sJ)(et);function F(){for(var e,t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];for(var l=Ur(i,null==Jt||null===(e=Jt.abi)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.inputs)||{},s=null!=L&&L.length?r()(L):[],o=!1,c=0;c<(null==L?void 0:L.length);c++){var u=L[c];if(u.market===l.market&&u.isLong===l.isLong){s[c]=f()(f()({},u),{},{category:null==l?void 0:l.category}),o=!0;break}}!o&&s.unshift(f()(f()({},l),{},{pair:(null==l?void 0:l.pair)||"ETH/USD",leverage:"0",size:"",collateral:"0",netValue:"0",averagePrice:"0",liqPrice:"0"})),w(s)}(0,o.useEffect)((function(){if(!i)return C([]),w([]),void h([]);Qt(i).then((function(e){return C(e)})),Qe(i).then((function(e){return w(e)})),Ut(i).then((function(e){return h(e)}))}),[i,b,t]),(0,o.useEffect)((function(){if(i){var e,t=null==i||null===(e=i.market)||void 0===e?void 0:e._contract;return t.on("UpdatePosition",F),function(){t.off("UpdatePosition",F)}}}),[i]);var I=function(){j(!b)};return(0,V.jsx)("div",{className:si,children:(0,V.jsxs)(Ae.O.Group,{defaultIndex:u,onChange:function(e){d(e)},children:[(0,V.jsxs)("div",{className:di,children:[(0,V.jsxs)(Ae.O.List,{className:oi,children:[(0,V.jsxs)(Ae.O,{className:function(e){var t=e.selected;return P()(ci,v()({},ui,t))},children:["Positions ",k]}),(0,V.jsxs)(Ae.O,{className:function(e){var t=e.selected;return P()(ci,v()({},ui,t))},children:["Orders ",S]}),(0,V.jsx)(Ae.O,{className:function(e){var t=e.selected;return P()(ci,v()({},ui,t))},children:"Trades"})]}),(0,V.jsxs)("div",{className:pi,children:[(0,V.jsx)(Ee._H,{id:"Hide Other Pairs"}),(0,V.jsx)(Xt,{className:vi,checked:y,onChange:g})]})]}),(0,V.jsxs)(Ae.O.Panels,{children:[(0,V.jsx)(Ae.O.Panel,{children:(0,V.jsx)(Zr,{successCb:I,market:n,tradeShowArgs:i},+b)}),(0,V.jsx)(Ae.O.Panel,{children:(0,V.jsx)(li,{tradeShowArgs:i,successCb:I},+b)}),(0,V.jsx)(Ae.O.Panel,{children:(0,V.jsx)(Et,{},+b)})]})]})})},Jr=n(70001),Gr=n(20212),Yr=Object.defineProperty,Kr=Object.getOwnPropertySymbols,Wr=Object.prototype.hasOwnProperty,Xr=Object.prototype.propertyIsEnumerable,$r=(e,t,n)=>t in e?Yr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const ea=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))Wr.call(t,n)&&$r(e,n,t[n]);if(Kr)for(var n of Kr(t))Xr.call(t,n)&&$r(e,n,t[n]);return e})({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M11.478 18h3.478l5.294-6-5.294-6h-3.478l4.193 4.85H3.75v2.3h11.921L11.478 18Z",fill:"#F44364"}));var ta=Object.defineProperty,na=Object.getOwnPropertySymbols,ia=Object.prototype.hasOwnProperty,ra=Object.prototype.propertyIsEnumerable,aa=(e,t,n)=>t in e?ta(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const la=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))ia.call(t,n)&&aa(e,n,t[n]);if(na)for(var n of na(t))ra.call(t,n)&&aa(e,n,t[n]);return e})({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M7.652 12h2.319L13.5 8 9.97 4H7.653l2.795 3.234H2.5v1.532h7.947L7.652 12Z",fill:"#3DDB7C"}));var sa="value___QTafV",oa="new___MFwco",ca="old___nWboE",ua="arrowIcon___wpnLP",da="red___ta54J",pa=function(e){var t,n,i=e.symbolPrefix,r=void 0===i?"$":i,a=e.suffix,l=void 0===a?"":a,s=e.hasExistingPosition,o=e.priceDisplay,c=function(e){return(0,G.dp)(e,2).display({prefix:r,suffix:l})};return(0,V.jsx)("div",{className:sa,children:(t=c(null==o?void 0:o.existingPositionPrice),n=c(null==o?void 0:o.mergePositionPrice),s&&o&&o.mergePositionPrice&&o.mergePositionPrice.gt(0)?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{title:t,className:ca,children:t}),(0,V.jsx)(la,{className:P()(ua,v()({},da,((null==o?void 0:o.rise)||0)<0))}),(0,V.jsx)("div",{title:n,className:oa,children:n})]}):(0,V.jsx)("div",{title:n,className:oa,children:n}))})},va={arrowIcon:"arrowIcon___iG0uS",red:"red___cXHfH",header:"header___hkqkP",row:"row___gfzWa",price:"price___k5Z9o",tip:"tip___F0_el",title:"title___FCH8V",changeInfoItem:"changeInfoItem___LaDtd",titleLabel:"titleLabel___EWjyx",changeInfo:"changeInfo___rSff6",changeInfoText:"changeInfoText___RTV2Y",fields:"fields___x3gUc",field:"field___qxsTj",label:"label___J7n5A",value:"value___m6nh9",old:"old___CU5un",new:"new___dIyoY",cut:"cut___T5uNM",submitBtn:"submitBtn___aBHIR",longColor:"longColor___DWLUi"},ma=dr.Z.Text,fa=function(e){var t,n,i,r,a=e.size,l=e.slippage,s=e.liqPriceDisplay,u=e.positionFee,p=e.collateralDisplay,m=e.leverageDisplay,y=e.positionSizeDisplay,g=e.tradeShowArgs,x=e.fundingFee,h=e.hasExistingPosition,_=e.isPendingConfirmation,b=e.isMarketOrder,j=e.isLong,N=e.fromValue,w=e.toValue,L=e.toSymbol,T=e.entryPriceDisplay,C=e.executionFee,k=((0,ee.x)().chainId,e.visible),S=e.existingPosition,F=e.onClickSubmit,I=e.onClose,M=(0,c.sJ)(Je),O=(0,c.sJ)(d.bI),D=(0,c.sJ)(Ue),A=null===(t=(0,we.H2)((null==g||null===(n=g.market)||void 0===n||null===(i=n._args)||void 0===i?void 0:i.spread)||0,10))||void 0===t?void 0:t.toNumber();function E(e){return e?f()(f()({},e),{},{mergePositionPrice:Me.getCoinBasedSizeByUSD(e.mergePositionPrice,T.mergePositionPrice),existingPositionPrice:Me.getCoinBasedSizeByUSD(e.existingPositionPrice,T.existingPositionPrice)}):{mergePositionPrice:(0,G.Q6)(0),existingPositionPrice:(0,G.Q6)(0),rise:0}}var z=(0,o.useMemo)((function(){if(h)return" You already have an ".concat(j?"long":"short"," position that will increase the size of an existing position.");if(O){var e=(M||[]).filter((function(e){return"Trigger"===e.type&&e.pair===O.name&&e.isLong===j}));if(1===e.length)return"You have an active trigger order that could impact this Position";if(e.length>1)return"You have multiple active trigger orders that could impact this Position";var t=(M||[]).filter((function(e){return"Limit"===e.type&&e.pair===O.name&&e.isLong===j}));if(t.length>0)return t.length>1?"You have multiple existing Increase ".concat(j?"Long":"Short"," ").concat(L," limit orders"):"You have an active Limit Order that could impact this Position"}}),[O,M,S,j,h]),R=[{label:"Position Size",display:y,showCoinBased:D,prefix:D?"":"$",suffix:D?" ".concat(L):""},{label:"Leverage",display:m,prefix:"",suffix:"x"},{label:"Collateral",display:p}],Q=(0,G.dp)(N);return(0,V.jsx)(en.Z,{width:512,title:b?"Confirm ".concat(L,j?" Long":" Short"):"Confirm Limit Order",onClose:I,visible:k,children:(0,V.jsxs)("div",{className:va.wrapper,children:[(0,V.jsxs)("div",{className:va.header,children:[(0,V.jsxs)("div",{className:va.title,children:[(0,V.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iMTYiIGZpbGw9InVybCgjYSkiLz48cmVjdCB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHJ4PSIxNiIgZmlsbD0idXJsKCNiKSIvPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTEuMDUgNS45NWExLjIgMS4yIDAgMCAxIDEuMi0xLjJIMTZhMTEuMjIgMTEuMjIgMCAwIDEgOC4yNDggMy42SDExLjA1di0yLjRabTAgOC4yNWgxNi4wNTdhMTEuMzM3IDExLjMzNyAwIDAgMSAwIDMuNkgxMS4wNXYtMy42Wm0wIDkuNDV2Mi40YTEuMiAxLjIgMCAwIDAgMS4yIDEuMkgxNmExMS4yMiAxMS4yMiAwIDAgMCA4LjI0OC0zLjZIMTEuMDVaIiBmaWxsPSIjZmZmIi8+PHBhdGggb3BhY2l0eT0iLjYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNi44MzQgOS40NzVhMTEuMjAxIDExLjIwMSAwIDAgMC0xLjcgMy42aDIxLjczMmExMS4yMDIgMTEuMjAyIDAgMCAwLTEuNy0zLjZINi44MzNabTAgMTMuMDVhMTEuMjAzIDExLjIwMyAwIDAgMS0xLjctMy42aDIxLjczMmExMS4yMDUgMTEuMjA1IDAgMCAxLTEuNyAzLjZINi44MzNabTkuMTQ4IDQuNzI1aC4wMzUtLjAzNVoiIGZpbGw9IiNmZmYiLz48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSIwIiB5MT0iMCIgeDI9IjM5LjE3MiIgeTI9IjEwLjg2IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iIzNDRUFBQSIvPjxzdG9wIG9mZnNldD0iLjc3MSIgc3RvcC1jb2xvcj0iIzVDNzJGRiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iMCIgeTE9IjAiIHgyPSIzOS4xNzIiIHkyPSIxMC44NiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiMzQ0VBQUEiLz48c3RvcCBvZmZzZXQ9Ii43NzEiIHN0b3AtY29sb3I9IiM1QzcyRkYiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48L3N2Zz4="}),(0,V.jsxs)("div",{className:P()(va.titleLabel,v()({},va.longColor,j)),children:[null==O?void 0:O.name," ",j?"LONG":"SHORT"]})]}),(0,V.jsxs)("div",{className:va.changeInfo,children:[(0,V.jsxs)(ma,{className:"".concat(va.changeInfoText," c200 f16 fw3 tc"),children:["Pay ",Q.display({prefix:""})," USDC (",Q.display(),")"]}),(0,V.jsx)("div",{children:(0,V.jsx)(ea,{className:P()(va.arrowIcon,{cLong:j})})}),(0,V.jsxs)(ma,{className:"".concat(va.changeInfoText," c200 f16 fw3 tc"),children:[j?"Long":"Short"," ","".concat((0,G.dp)(w,4).display({prefix:"",suffix:" ".concat(L)})," "),"(",(0,G.dp)(a).display(),")"]})]})]}),z&&(0,V.jsx)("div",{className:va.tip,children:z}),(0,V.jsxs)("div",{className:va.fields,children:[(R||[]).map((function(e){var t=e.display,n=e.showCoinBased,i=e.suffix,r=e.prefix,a=e.label;return(0,V.jsxs)("div",{className:va.field,children:[(0,V.jsx)("div",{className:va.label,children:(0,V.jsx)(Ee._H,{id:a})}),(0,V.jsx)(pa,{suffix:i,symbolPrefix:r,hasExistingPosition:h,priceDisplay:n?E(t):t})]},a)})),(0,V.jsx)(Li,{isLimit:!0,executionFee:C,positionFee:u,fees:Number(u)>=0&&Number(C)>=0?null===(r=+u+ +C)||void 0===r?void 0:r.toString():"-"}),(0,V.jsxs)("div",{className:va.field,children:[(0,V.jsx)("div",{className:va.label,children:(0,V.jsx)(Ee._H,{id:"Funding Fee"})}),(0,V.jsx)("div",{className:va.value,children:(0,V.jsx)("div",{className:va.new,children:"".concat(x||"-")})})]}),(0,V.jsx)("div",{className:va.cut}),(0,V.jsxs)("div",{className:va.field,children:[(0,V.jsx)("div",{className:va.label,children:(0,V.jsx)(Ee._H,{id:"Entry Price"})}),(0,V.jsx)(pa,{hasExistingPosition:h,priceDisplay:T})]}),(0,V.jsxs)("div",{className:va.field,children:[(0,V.jsx)("div",{className:va.label,children:(0,V.jsx)(Ee._H,{id:"Liq. Price"})}),(0,V.jsx)(pa,{hasExistingPosition:h,priceDisplay:s})]}),(0,V.jsx)("div",{className:va.cut}),(0,V.jsxs)("div",{className:va.field,children:[(0,V.jsx)("div",{className:va.label,children:(0,V.jsx)(Ee._H,{id:"Type"})}),(0,V.jsx)("div",{className:va.value,children:(0,V.jsx)("div",{className:va.new,children:b?"Market":"Limit"})})]}),(0,V.jsxs)("div",{className:va.field,children:[(0,V.jsx)("div",{className:va.label,children:(0,V.jsx)(Ee._H,{id:"Spread"})}),(0,V.jsx)("div",{className:va.value,children:(0,V.jsxs)("div",{className:va.new,children:[A,"%"]})})]}),(0,V.jsxs)("div",{className:va.field,children:[(0,V.jsx)("div",{className:va.label,children:(0,V.jsx)(Ee._H,{id:"Slippage"})}),(0,V.jsx)("div",{className:va.value,children:(0,V.jsxs)("div",{className:va.new,children:[l,"%"]})})]})]}),(0,V.jsx)(tt.Z,{disabled:_,size:"large",className:va.submitBtn,onClick:F,children:function(){if(!_){false;var e=b?j?"Long":"Short":"Create Order";return b&&ie.bD>0?"Accept minimum and ".concat(e):e}return b?j?"Longing...":"Shorting...":"Creating Order..."}()})]})})},ya=n(41957),ga=n(76327),xa=(n(41429),{header:"header___TC62F",field:"field___SKQvO",value:"value___ZPyQn",leverage:"leverage___DJlMu",multiple:"multiple___TgITL",customInput:"customInput___vG08t",inputNumber:"inputNumber___Y7Id3",item:"item___kY23e",active:"active___NJOgJ",sliderBox:"sliderBox___OugRQ",slider:"slider___JsDOm"}),ha=["10","20","50","100"],_a={2:{label:"2x",style:{color:"#fff",fontSize:"14px"}},100:{label:"100x",style:{color:"#fff",fontSize:"14px"}}},ba=function(e){var t=e.onChange,n=e.value,i=(0,o.useState)(!1),r=l()(i,2),a=r[0],s=r[1];return(0,V.jsxs)("div",{children:[(0,V.jsxs)("div",{className:xa.header,children:[(0,V.jsxs)("div",{className:xa.field,children:[(0,V.jsx)("div",{className:xa.label,children:"Leverage: "}),(0,V.jsxs)("div",{className:xa.value,style:{color:n?"#fff":"#9597b5"},children:[n||"2x to 100","x"]})]}),(0,V.jsx)(Xt,{checked:a,onChange:s})]}),a?(0,V.jsx)("div",{className:xa.sliderBox,children:(0,V.jsx)(ga.Z,{value:Number(n),railStyle:{opacity:.2,background:"linear-gradient(105.49deg, #3CEAAA 0%, #5C72FF 79.56%)"},onChange:function(e){return t(String(e))},className:xa.slider,min:2,max:100,marks:_a,step:.1})}):(0,V.jsxs)("div",{className:"".concat(xa.leverageInputBox," df"),children:[(0,V.jsx)("div",{className:xa.inputNumber,children:(0,V.jsx)(ya.Z,{value:n,style:{width:"100%"},min:2,max:100,controls:!1,precision:2,placeholder:"0.0",formatter:function(e){return e?parseFloat(e):e},onChange:function(e){return t(e)}})}),ha.map((function(e){return(0,V.jsx)("div",{children:(0,V.jsx)("div",{onClick:function(){return t(e)},className:P()(xa.item,v()({},xa.active,e===n)),children:"".concat(e,"x")},e)},e)}))]})]})},ja=Object.defineProperty,Pa=Object.getOwnPropertySymbols,Na=Object.prototype.hasOwnProperty,wa=Object.prototype.propertyIsEnumerable,La=(e,t,n)=>t in e?ja(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Ta=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))Na.call(t,n)&&La(e,n,t[n]);if(Pa)for(var n of Pa(t))wa.call(t,n)&&La(e,n,t[n]);return e})({width:8,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"m7.2 6-3.224 4.8L.8 6h6.4Z",fill:"#fff"}));var Ca=Object.defineProperty,ka=Object.getOwnPropertySymbols,Sa=Object.prototype.hasOwnProperty,Fa=Object.prototype.propertyIsEnumerable,Ia=(e,t,n)=>t in e?Ca(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Ma=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))Sa.call(t,n)&&Ia(e,n,t[n]);if(ka)for(var n of ka(t))Fa.call(t,n)&&Ia(e,n,t[n]);return e})({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"m10 12.586 4-4 5.707 5.707L22 12v6h-6l2.293-2.293L14 11.414l-4 4-7.707-7.707 1.414-1.414L10 12.586Z",fill:"#F44364"}));var Oa=Object.defineProperty,Da=Object.getOwnPropertySymbols,Aa=Object.prototype.hasOwnProperty,Ea=Object.prototype.propertyIsEnumerable,za=(e,t,n)=>t in e?Oa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Ra=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))Aa.call(t,n)&&za(e,n,t[n]);if(Da)for(var n of Da(t))Ea.call(t,n)&&za(e,n,t[n]);return e})({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"m10 12.414 4 4 5.707-5.707L22 13V7h-6l2.293 2.293L14 13.586l-4-4-7.707 7.707 1.414 1.414L10 12.414Z",fill:"#fff"}));var Qa=n(66133),Ba=n(4051),Ha=n(76078),Za="field___lFCUO",Va="label___Ut9cW",Ua="value___TeWjD",qa=function(e){var t,n,i=e.liqPriceDisplay,r=e.entryPriceDisplay,a=e.hasExistingPosition,l=e.fundingFee,s=e.availableLiquidity,o=e.positionFee,c=e.executionFee;return(0,V.jsxs)("div",{children:[(0,V.jsxs)("div",{className:Za,children:[(0,V.jsx)("div",{className:Va,children:"Entry Price"}),(0,V.jsx)(pa,{hasExistingPosition:a,priceDisplay:r})]}),(0,V.jsxs)("div",{className:Za,children:[(0,V.jsx)("div",{className:Va,children:"Liq. Price"}),(0,V.jsx)(pa,{hasExistingPosition:a,priceDisplay:i})]}),(0,V.jsx)(Li,{isLimit:!0,executionFee:c,positionFee:o,fees:Number(o)>=0&&Number(c)>=0?null===(t=+o+ +c)||void 0===t?void 0:t.toString():"-"}),(0,V.jsxs)("div",{className:Za,children:[(0,V.jsx)("div",{className:Va,children:"Funding Fee"}),(0,V.jsx)("div",{className:Ua,children:l})]}),(0,V.jsxs)("div",{className:Za,children:[(0,V.jsx)("div",{className:Va,children:"Available Liquidity"}),(0,V.jsx)("div",{className:Ua,children:(n=s,(0,G.dp)(n,2).display())})]})]})},Ja={tabList:"tabList___yWdXa",select:"select___XVRcq",tabLong:"tabLong___tGsCL",tabShort:"tabShort___bAVl0",selected:"selected___YaUw9",label:"label___V2PWs",tradeBar:"tradeBar___CpLnN",tradePanel:"tradePanel___AMHi2",options:"options___ewpuO",option:"option___NDplS",optionActive:"optionActive___Kv41n",sizeTitle:"sizeTitle___E2V4b",row:"row___dT_JX",size:"size___EuhIT",value:"value___BtMri",field:"field___ob36v",panel:"panel___lJHih",cut:"cut___YHMHw",advanced:"advanced___UjvFf",submitBtn:"submitBtn___zk5iO"},Ga=(0,ne.Ij)().isWindows,Ya=function(e){var t,n=e.indexPrice,i=e.tradeShowArgs,a=e.orderOption,p=e.swapOption,m=e.onChangeSwapOption,y=e.onChangOrderOption,g=(0,c.FV)(Ve),x=l()(g,2),h=x[0],_=x[1],b=(0,s.Ge)(),j=b.active,N=b.account,w=(0,ee.x)().chainId,L=(0,c.sJ)(d.bI),T=(0,c.sJ)(Ue),C=(0,o.useState)(!1),k=l()(C,2),S=k[0],F=k[1],I=(0,o.useState)(n),M=l()(I,2),O=M[0],D=M[1],A=(0,o.useState)(!1),E=l()(A,2),z=E[0],R=E[1],Q=a===ie.YO,B=p===ie.FB,H=(0,o.useState)(!1),Z=l()(H,2),U=Z[0],q=Z[1],J=(0,o.useState)(!0),Y=l()(J,2),K=Y[0],W=Y[1],X=(0,o.useState)(""),$=l()(X,2),te=$[0],ne=$[1],ae=(0,o.useState)(""),le=l()(ae,2),se=le[0],oe=le[1],ce=Oe.I.useContainer().setWalletVisible,ue=(0,c.sJ)(Ke),de=(0,o.useState)(),pe=l()(de,2),ve=pe[0],me=pe[1],fe=Oe.I.useContainer().setPendingTxns,ye=null==i?void 0:i.openFeeRate,ge=null==i?void 0:i.executionFee,xe=null==i?void 0:i.market,he=null==xe?void 0:xe._valid.maxLev,_e=null==i?void 0:i.symbol,be=Q?n:O,je=(null==i||null===(t=i.market)||void 0===t?void 0:t.getTokenDigits())||18,Pe=Oe.I.useContainer(),Ne=Pe.tableFlag,Le=Pe.setTableFlag;(0,o.useEffect)((function(){!ve&&i&&me({takeProfit:null==i?void 0:i.takeProfit,stopLoss:null==i?void 0:i.stopLoss,slippage:null==i?void 0:i.slippage})}),[null==i?void 0:i.takeProfit,null==i?void 0:i.stopLoss,null==i?void 0:i.slippage]);var Te=(0,Jr.Z)(Object.create(null)),Ce=l()(Te,2),ke=(Ce[0],Ce[1]),Se=ke.set,Fe=(0,ke.get)(N);(0,o.useEffect)((function(){!Fe&&N&&null!=i&&i.market&&i.market.allowance(N).then((function(e){Se(N,e&&e.gt&&e.gt(0))}))}),[null==i?void 0:i.market,N,Fe]);var Ie=function(e){a!==e&&(e!==ie.VZ||O&&"0"!==O||D(n),me(f()(f()({},ve),{},{stopLoss:"",takeProfit:""})),y(e))},De=function(e){e!==p&&(me(f()(f()({},ve),{},{stopLoss:"",takeProfit:""})),D(""),m(e))},Ae=(0,o.useMemo)((function(){if(L&&ue&&ue.length>0){var e="".concat(B?"Long":"Short");return ue.find((function(t){return t.pair===L.name&&t.account===N&&t.side===e}))}return null}),[ue,B,L]);(0,o.useEffect)((function(){W(!0),ne("")}),[Q,B]);var ze=(0,o.useMemo)((function(){return Boolean(Ae&&Ae.size&&(0,G.Q6)(Ae.size).gt(0))}),[Ae]),Re=(0,u.ZP)((function(){return N&&null!=L&&L.address?[N,null==L?void 0:L.address]:null}),(function(){var e;return null==i||null===(e=i.reader)||void 0===e?void 0:e.availableLiquidity(N,L.address,B)})).data,Qe=(0,o.useMemo)((function(){return null==i?void 0:i.market.formatNum(Re,2)}),[Re]),Be=o.useRef(),He=(0,u.ZP)((function(){return null!=i&&i.market?i:null}),(function(){return Me.getFundFeeRete(i,B)})).data,Ze=(0,re.Ju)([w,"depx-swap-leverage-option"],"10"),qe=l()(Ze,2),Je=qe[0],Ge=qe[1];function Ye(){var e=(0,G.Q6)(Re);return!(!e.gt(0)||!We.gt(e))&&{id:"MAXExceeded",values:{toSymbol:_e,pos:B?"long":"short"}}}var We=(0,o.useMemo)((function(){return Me.getSize((0,G.Q6)(te),(0,G.Q6)(ye||"0"),Number(Je))}),[te,Je,ye]);(0,Gr.Z)((function(){var e=(0,G.Q6)(be),t=(0,G.Q6)(ye||"0");if(K)return te?void function(e){var t=(0,G.Q6)(be),n=(0,G.Q6)(ye||"0");if(e){var r=Me.getNextAmount((0,G.Q6)(te),t,n,Number(Je));oe((0,G.dp)(r,18).value)}else oe((0,G.dp)(We,i.ctokenDecimals).value)}(T):void oe("");if(se&&Je&&0!==Number(be))if(T){var n=(0,G.dp)(Me.getNextPay((0,G.Q6)(se),e,t||(0,G.Q6)(0),Number(Je)),8).value;ne(n)}else ne(Me.getPayBySize((0,G.Q6)(se),t,Number(Je)).toFixed(8,1));else ne("")}),400,[i,se,We,h,K,Je,ye,te]);var Xe=(0,o.useMemo)((function(){return(0,G.Q6)(Q?0:ge)}),[Q,ge]),$e=(0,o.useMemo)((function(){var e,t=(0,G.Q6)(ye||0),n=Me.getOpenFee(We,t),r=(0,G.Q6)(be),a=(0,G.Q6)(te),l=(0,G.Q6)(null!==(e=null==i?void 0:i.cleanFee)&&void 0!==e?e:"0"),s=Me.getEntryPriceDisplay(r,We,B,Ae);if(te&&Je&&be){var o=Me.getConfirmStat({size:We,leverageOption:Number(Je),executionFee:Xe,entryPrice:s.mergePositionPrice,existingPosition:Ae,positionFeeRate:(0,G.Q6)(ye||0),hasExistingPosition:ze,pay:a,openFee:n,cleanFee:l}),c=o.getCollateralDisplay(),u=(0,G.Q6)((null==he?void 0:he.toNumber())||100),d=o.getLigPriceDisplay(s.mergePositionPrice,u,B,t),p=o.getNextSizeDisplay(),v=o.getLeverageDisplay();return{entryPriceDisplay:s,openFee:(0,G.dp)(n,2).value,liqPriceDisplay:d,collateralDisplay:c,leverageDisplay:v,positionSizeDisplay:p}}return{entryPriceDisplay:s,openFee:(0,G.dp)(n,2).value}}),[te,We,he,Ae,be,se,ge,B,Q,Je,ye]),et=$e.openFee,nt=$e.liqPriceDisplay,it=$e.collateralDisplay,rt=$e.leverageDisplay,at=$e.positionSizeDisplay,lt=$e.entryPriceDisplay,st=function(){if(S)return[(0,V.jsx)(Ee._H,{id:"Approving..."}),!0];if(z)return["".concat(B?"Long":"Short"," ").concat(_e),!0];if(!j)return[(0,V.jsx)(Ee._H,{id:"Connect Wallet"}),!1];if(!Fe)return[(0,V.jsx)(Ee._H,{id:"Approve"}),!1];if(!(0,Ba.EC)(w))return[(0,V.jsx)(Ee._H,{id:"Incorrect Network"}),!0];var e=function(){if(!(Q||O&&"0"!==O))return(0,V.jsx)(Ee._H,{id:"Enter A Price"});if(!be)return(0,V.jsx)(Ee._H,{id:"Enter A Price"});var e=(0,G.Q6)(be);if(e.eq(0))return(0,V.jsx)(Ee._H,{id:"Enter A Price"});if(!Q){if(B&&e.gt((0,G.Q6)(n)))return(0,V.jsx)(Ee._H,{id:"Price Above Current Price"});if(!B&&e.lt((0,G.Q6)(n)))return(0,V.jsx)(Ee._H,{id:"Price Below Current Price"})}if(!se||(0,G.Q6)(se).eq(0))return(0,V.jsx)(Ee._H,{id:"Enter An Amount"});var t=(0,G.Q6)(te);if(t.eq(0))return(0,V.jsx)(Ee._H,{id:"Enter An Amount"});if(t.gt((0,G.Q6)((null==i?void 0:i.avlb)||te)))return(0,V.jsx)(Ee._H,{id:"Insufficient USDC Balance"});if(t.lt(10))return(0,V.jsx)(Ee._H,{id:"MinPayUSD",values:{min:10}});if(t.gt(Zi))return(0,V.jsx)(Ee._H,{id:"MaxPayUSD",values:{max:Zi}});var r=Ye();if(r)return(0,V.jsx)(Ee._H,f()({},r));var a=(null==he?void 0:he.toNumber())||100;if(Number(Je)>a)return(0,V.jsx)(Ee._H,{id:"MAXLeverage",values:{max:a}});if(Number(Je)<2)return(0,V.jsx)(Ee._H,{id:"MinLeverage",values:{min:2}});if(null!=ve&&ve.stopLoss){var l=(0,G.Q6)(ve.stopLoss);if(B&&l.gte(e))return(0,V.jsx)(Ee._H,{id:"Stop Loss Above Current Price"});if(!B&&l.lte(e))return(0,V.jsx)(Ee._H,{id:"Stop Loss Below Current Price"});if(B&&null!=nt&&nt.mergePositionPrice&&l.lte(nt.mergePositionPrice))return(0,V.jsx)(Ee._H,{id:"Stop Loss Below Liq. Price"});if(!B&&null!=nt&&nt.mergePositionPrice&&l.gte(nt.mergePositionPrice))return(0,V.jsx)(Ee._H,{id:"Stop Loss Above Liq. Price"})}if(null!=ve&&ve.takeProfit){var s=(0,G.Q6)(ve.takeProfit);if(B&&s.lte(e))return(0,V.jsx)(Ee._H,{id:"Take Profit Below Current Price"});if(!B&&s.gte(e))return(0,V.jsx)(Ee._H,{id:"Take Profit Above Current Price"});if(B&&null!=nt&&nt.mergePositionPrice&&s.lte(nt.mergePositionPrice))return(0,V.jsx)(Ee._H,{id:"Take Profit Below Liq. Price"});if(!B&&null!=nt&&nt.mergePositionPrice&&s.gte(nt.mergePositionPrice))return(0,V.jsx)(Ee._H,{id:"Take Profit Above Liq. Price"})}if(null!=ve&&ve.slippage){if(Number(ve.slippage)>5)return(0,V.jsx)(Ee._H,{id:"Slippage should be less than ".concat(5,"%")});if(Number(ve.slippage)<.01)return(0,V.jsx)(Ee._H,{id:"Slippage should be more than ".concat(.01,"%")})}return""}();return e?[e,!0]:_e?Q?["".concat(B?"Long":"Short"," ").concat(_e),!1]:[(0,V.jsx)(Ee._H,{id:"Create Limit Order"}),!1]:[(0,V.jsx)(Ee._H,{id:"Create"}),!1]}(),ot=l()(st,2),ct=ot[0],ut=ot[1],dt=(0,o.useMemo)((function(){return[null!=ve&&ve.takeProfit?(0,G.dp)(Me.getEstimatedPNL({isLong:B,entryPrice:(0,G.Q6)(be),price:(0,G.Q6)(null==ve?void 0:ve.takeProfit),size:We}),2).value:"",null!=ve&&ve.stopLoss?(0,G.dp)(Me.getEstimatedPNL({isLong:B,entryPrice:(0,G.Q6)(be),price:(0,G.Q6)(null==ve?void 0:ve.stopLoss),size:We}),2).value:""]}),[null==ve?void 0:ve.takeProfit,null==ve?void 0:ve.stopLoss,B,We,be]),pt=l()(dt,2),vt=pt[0],mt=pt[1],ft=(0,o.useMemo)((function(){return He?(Be.current="".concat(Me.getFundFeeRateDisplay(He,B),"%/1 h"),Be.current):Be.current||"-"}),[He,B]),yt=(0,o.useMemo)((function(){return[{value:"USD",label:"USD"},{value:_e,label:_e}]}),[_e]);return(0,V.jsx)("div",{className:P()(Ja.tradeBar,v()({},Ja.hideScrollbar,Ga)),children:(0,V.jsxs)("div",{className:Ja.tradePanel,children:[(0,V.jsx)(fa,{size:null==We?void 0:We.toFixed(2,1),entryPriceDisplay:lt,slippage:(null==ve?void 0:ve.slippage)||"0",tradeShowArgs:i,positionFee:et,liqPriceDisplay:nt,collateralDisplay:it,leverageDisplay:rt,positionSizeDisplay:at,fundingFee:ft,isPendingConfirmation:z,existingPosition:Ae,hasExistingPosition:ze,toSymbol:_e,fromValue:te,onClickSubmit:function(){if(j){if(!z&&N&&be){var e=Ye();if(e)return void Ha.U.error((0,V.jsx)(Ee._H,f()({},e)));R(!0),function(e,t,n,i,r){if(n.market){var a={isLimit:n.isLimit,payDelta:n.market.getNumDecimals(n.pay),sizeDelta:n.market.getNumDecimals(n.size),price:n.market.getPriceDecimals(n.price),tpPrice:n.market.getPriceDecimals(n.takeProfit||"0"),slPrice:n.market.getPriceDecimals(n.stopLoss||"0"),slippage:n.market.getSlippageDecimals(n.market.formatPercentage(n.slippage)),isLong:n.isLong,isExec:!1,isKeepLev:!1,account:t};return console.log("[confirmSwap]  ",a),n.market.setChainId(e),n.market.setPendingTxns(i),n.market.increaseTrade(a,n.market.parseNumber(n.pay,n.ctokenDecimals),r)}return Promise.reject()}(w,N,f()(f()(f()({},i),ve),{},{pay:te,isLimit:!Q,size:(0,G.dp)(We,i.ctokenDecimals||18).value,price:be,isLong:B}),fe,(function(){R(!1)})).then((function(e){e||R(!1),Le(!Ne),q(!1)})).catch((function(e){console.error(e),R(!1)}))}}else ce(!0)},isMarketOrder:Q,isLong:B,chainId:w,visible:U,toValue:se,onClose:function(){q(!1)},executionFee:null==Xe?void 0:Xe.toString()}),(0,V.jsxs)("div",{className:Ja.tabList,children:[(0,V.jsxs)("div",{className:P()(Ja.tabLong,v()({},Ja.selected,B)),onClick:function(){De(ie.FB)},children:[(0,V.jsx)(Ra,{}),(0,V.jsx)("div",{className:Ja.label,children:"Long"})]}),(0,V.jsxs)("div",{className:P()(Ja.tabShort,v()({},Ja.selected,!B)),onClick:function(){De(ie.Qo)},children:[(0,V.jsx)(Ma,{}),(0,V.jsx)("div",{className:Ja.label,children:"Short"})]})]}),(0,V.jsxs)("div",{className:Ja.options,children:[(0,V.jsx)("div",{onClick:function(){Ie(ie.YO)},className:P()(Ja.option,v()({},Ja.optionActive,Q)),children:"Market"}),(0,V.jsx)("div",{onClick:function(){Ie(ie.VZ)},className:P()(Ja.option,v()({},Ja.optionActive,!Q)),children:"Limit"})]}),(0,V.jsx)(tn.tV,{disabled:Q,onChange:D,value:be,decimals:je},Q?"market":"limit"),(0,V.jsx)(tn.ZP,{label:"Amount",value:se,decimals:je,onChange:function(e){W(!1),oe(e)},children:_e&&(0,V.jsx)(Qa.Z,{size:"small",placement:"bottomLeft",showSearch:!1,defaultValue:_e,suffixIcon:(0,V.jsx)(Ta,{color:"#fff"}),getPopupContainer:function(e){return e.parentElement},dropdownMatchSelectWidth:100,className:Ja.select,value:h,onChange:function(e){_(e),0!==Number(se)&&W(!0)},options:yt})}),(0,V.jsxs)("div",{className:Ja.row,children:[We&&(0,V.jsx)(Jn.Z,{getPopupContainer:function(e){return e.parentElement},overlay:(0,V.jsxs)("div",{children:[(0,V.jsx)("div",{className:Ja.sizeTitle,children:"Size"}),(0,V.jsx)(Ee._H,{id:"Trading units using stable coins in DEI such as USD, open position amounts shown are calculated based on the actual coin quantity. Values change with the last price of the symbol."})]}),children:(0,V.jsx)("div",{className:"".concat(Ja.field," ").concat(Ja.size),children:(0,V.jsx)("div",{className:Ja.value,children:"Size: ".concat((0,G.dp)(We,2).display())})})}),(0,V.jsxs)("div",{className:Ja.field,children:[(0,V.jsx)("div",{className:Ja.label,children:"Balance:"}),(0,V.jsx)("div",{className:Ja.value,children:null!=i&&i.avlb?"".concat((0,G.dp)((null==i?void 0:i.avlb)||0,4).display({prefix:""})," USDC"):"-"})]})]}),(0,V.jsx)(tn.gp,{onClickMaxBtn:function(){W(!0),ne((null==i?void 0:i.avlb)||"0")},value:te,decimals:je,onChange:function(e){W(!0),ne(e)}}),(0,V.jsx)(ba,{value:Je,onChange:function(e){return Ge(e)}}),(0,V.jsx)(tt.Z,{className:Ja.submitBtn,disabled:ut,size:"large",onClick:function(){if(j)if(Fe)q(!0);else{F(!0);var e=(0,we._b)(Math.max(100*Math.pow(10,6),Number(te)||1));null==i||i.market.approve(N,e,!0).then((function(e){var t=e;if(t.hash){var n={hash:t.hash,message:"USDC Approved!",callback:function(){Se(N,!0),F(!1)}};fe((function(e){return[].concat(r()(e),[n])}))}else F(!1)})).catch((function(e){console.error(e),F(!1)}))}else ce(!0)},children:ct}),(0,V.jsxs)("div",{className:Ja.panel,children:[(0,V.jsx)(kn,{tkpPNL:vt,stopLossPNL:mt,onChange:me,value:ve,ifAll:!0,collect:!0}),(0,V.jsx)("div",{className:Ja.cut}),(0,V.jsx)(qa,{hasExistingPosition:ze,positionFee:et,fundingFee:ft,entryPriceDisplay:lt,availableLiquidity:Qe,liqPriceDisplay:nt,executionFee:null==Xe?void 0:Xe.toString()})]})]})})},Ka=function(){var e,t,n,i=(0,ee.x)().chainId,a=(0,s.Ge)(),p=a.account,v=a.library,m=Oe.I.useContainer().setPendingTxns,f=(0,o.useState)(ie.YO),y=l()(f,2),g=y[0],x=y[1],h=(0,o.useState)(ie.FB),_=l()(h,2),b=_[0],j=_[1],P=(0,c.sJ)(d.O7),N=(0,c.sJ)(d.tr),w=(0,c.sJ)(d.bI),L=(null===(t=P[null===(e=(0,ne.do)(null==w?void 0:w.name))||void 0===e?void 0:e.toLowerCase()])||void 0===t||null===(n=t.indexPrice)||void 0===n?void 0:n.toFixed(2))||"0",T=(0,u.ZP)(null!=w&&w.address?[i,null==w?void 0:w.address,null==w?void 0:w.name,v,p]:null,(function(e){return Se.apply(void 0,[L,m].concat(r()(e)))})).data;return w?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:De,children:[(0,V.jsx)(de,{indexPrice:L,markets:N||[],swapOption:b}),(0,V.jsx)(Ya,{indexPrice:L,tradeShowArgs:T,swapOption:b,orderOption:g,onChangOrderOption:x,onChangeSwapOption:j})]}),(0,V.jsx)(qr,{market:null==T?void 0:T.market,tradeShowArgs:T})]}):(0,V.jsx)(V.Fragment,{})}},77912:function(e,t,n){var i={"./cancel.svg":15001,"./close.svg":7418,"./closing.png":45912,"./closing.svg":34256,"./edit.svg":3900,"./loading.png":38746,"./loading.svg":40791,"./mainorder.svg":39124,"./power.svg":77356,"./right_arrow.svg":98018,"./share.svg":91290,"./suborder.svg":46903,"./warningRed.svg":35047,"./warningYellow.svg":15595};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id=77912},15001:function(e,t,n){"use strict";e.exports=n.p+"static/cancel.faf5d99b.svg"},7418:function(e,t,n){"use strict";e.exports=n.p+"static/close.faf5d99b.svg"},34256:function(e,t,n){"use strict";e.exports=n.p+"static/closing.a16d933d.svg"},3900:function(e,t,n){"use strict";e.exports=n.p+"static/edit.f1c66f25.svg"},40791:function(e,t,n){"use strict";e.exports=n.p+"static/loading.9a8739bb.svg"},39124:function(e,t,n){"use strict";e.exports=n.p+"static/mainorder.d191e45f.svg"},77356:function(e,t,n){"use strict";e.exports=n.p+"static/power.c7835c74.svg"},98018:function(e,t,n){"use strict";e.exports=n.p+"static/right_arrow.4b966293.svg"},91290:function(e,t,n){"use strict";e.exports=n.p+"static/share.17450885.svg"},46903:function(e,t,n){"use strict";e.exports=n.p+"static/suborder.00c0076d.svg"},35047:function(e,t,n){"use strict";e.exports=n.p+"static/warningRed.269e5a2a.svg"},15595:function(e,t,n){"use strict";e.exports=n.p+"static/warningYellow.3a511a3a.svg"},45912:function(e){"use strict";e.exports="data:image/png;base64,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"},38746:function(e){"use strict";e.exports="data:image/png;base64,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"}}]);